function manageGarageModal(e){for(var t=".profile_tab_content.garage .modal_window.modal_profile .modal_steps li",a=".profile_tab_content.garage .modal_window.modal_profile .modal_tab",i=e,n=++i;n<=4;n++)GarageModal[n]=!1,$(t+"[data-profile-modal-tab="+n+"]").removeClass("active");for(key in GarageModal)GarageModal[key]&&($(t+"[data-profile-modal-tab="+key+"]").addClass("active"),$(a).css("display","none"),$(a+"[data-profile-modal-tab="+key+"]").css("display","block"))}function hideBlock(e){for(var t=0;t<arguments.length;t++)$(arguments[t]).css("display","none")}function showBlock(e){for(var t=0;t<arguments.length;t++)$(arguments[t]).css("display","block")}function toggleClassOfFewElem(e){for(var t=0;t<arguments.length;t++)$(arguments[t]).toggleClass("active")}function setImgAsBg(e){var t=$(e).attr("src");$(e).parent().css("background-image","url("+t+")"),hideBlock(e)}function smoothShow(e,t){function a(){$(this).find(e).addClass("active")}$(this).find(e).css("display",t);var i=this;setTimeout(a.bind(i,e),100)}function manageMenuButtons(e){$(e).removeClass("active"),$(this).addClass("active")}function addCustomSelect(e){$(e).each(function(){var e=$(this),t=$(this).children("option").length;e.addClass("select-hidden"),e.wrap('<div class="select"></div>'),e.after('<div class="select-styled"></div>');var a=e.next("div.select-styled");a.html(e.children("option").eq(0).html());for(var i=$("<ul />",{class:"select-options"}).insertAfter(a),n=0;n<t;n++)$("<li />",{text:e.children("option").eq(n).text(),rel:e.children("option").eq(n).val()}).appendTo(i);var o=i.children("li");a.on("click",function(e){$(this).hasClass("disabled")||(e.stopPropagation(),$("div.select-styled.active").not(this).each(function(){$(this).removeClass("active").next("ul.select-options").hide()}),$(this).toggleClass("active").next("ul.select-options").toggle())}),o.on("click",function(t){t.stopPropagation(),a.addClass("changed"),a.html($(this).html()).removeClass("active"),e.val($(this).attr("rel")),i.hide()}),$(document).on("click",function(){a.removeClass("active"),i.hide()})})}function changeHeaderView(e){e=parseInt(e)>0?parseInt(e):-parseInt(e),e>150&&!$(".header_bottom").hasClass("min")?$(".header_bottom").delay(300).addClass("min"):e<=150&&$(".header_bottom").delay(300).removeClass("min")}function toggleGridClasses(){$(".content_products").css("height",2*content_panel_h+"px");$(".grid_view .list").toggleClass("active"),$(".grid_view .grid").toggleClass("active"),$(".content_products").removeClass("active"),$(".content_products").toggleClass("grid"),$(".content_products").toggleClass("list"),setTimeout(function(){$(".content_products").addClass("active"),$(".content_products").css("height","auto")},500)}function changeAlphabetSort(e){e.preventDefault(),$(this).addClass("active")}function showAlphabetSort(){$(this).toggleClass("active");var e=$(this).parent().find("ul");e.css("display","block"),setTimeout(function(){e.toggleClass("active")},100),setTimeout(function(){e.hasClass("active")||e.css("display","none")},300)}function showModelResults(){$(".result_grid .single_result").each(function(){$(this).find(".model_choosing .model").length<2&&$(this).find(".title").text($(this).find(".model_choosing .model").text())}),setSelection(Select_2,".result_grid .single_result .model",".content_products .result_grid .model_choosing .model"),Select_2.state(!0)}function actionForModelChoosing(){function e(){setSelection(Select_3,'.result_list .result_list_row [data-value="motor"]','.result_list .result_list_row [data-value="motor"]'),Select_3.state(!0)}$(".content_products").removeClass("grid"),hideBlock(".content_products_wrapper >div"),loadContent(".content_products_wrapper","../index_result.html .result_list",e)}function showResultTab2Level1(){var e=findParent($(this),"single_result_extend");if($(this).hasClass("active"))$(this).removeClass("active"),$(this).parent().find(".single_model").css("height","0"),$(this).parent().find(".single_model_title.active").removeClass("active");else{$(this).addClass("active"),$(this).parent().css("height","auto"),$(this).parent().find(".single_model").css("height","50px"),$(this).parent().find(".model_content").css("height","0");try{e.css("height","auto")}catch(e){console.log(e)}}}function showResultTab2Level2(){$(this).hasClass("active")?($(this).removeClass("active"),$(this).parent().css("height","50px"),$(this).parent().find(".model_content").css("height","0")):($(this).addClass("active"),$(this).parent().css("height","auto"),$(this).parent().find(".model_content").css("height","auto"))}function respondCartSuccess(){$(".page_cart .products").empty(),$(".page_cart .total span").html("0");var e=new ModalWindow(".page_cart_modal_success");e.activateElement(),e.windowClose(".page_cart_modal_success .close"),checkCartIsEmpty()}function checkCartIsEmpty(){$(".page_cart .products .single_product").length<1&&$(".page_cart .order").addClass("unavaliable")}function setErrorMessage(e){!e&&$(".modal_registration_2_1 .invalid").length<1?$('<li><span class="invalid">Вы должны заполнить все поля</span></li>').insertBefore($(".modal_registration_2_1 .next")):e&&$(".modal_registration_2_1 .invalid").parent().remove()}function manageProductCell(e,t,a){var i=$(e.target);$(i).hasClass("cart")||findParent($(this),a).hasClass("active")?!$(i).hasClass("cart")&&findParent($(this),a).hasClass("active")?$(t+".active").removeClass("active"):$(i).hasClass("cart")&&!findParent($(this),a).hasClass("active")?($(t+".active").removeClass("active"),findParent($(this),a).addClass("active")):$(i).hasClass("cart")&&findParent($(this),a).hasClass("active"):($(t+".active").removeClass("active"),findParent($(this),a).addClass("active"))}function createExpandSearchSelects(){ex_search_sel_1.imported_list=Select_1.imported_list,ex_search_sel_1.createSelection(".ex_search_select_1"),ex_search_sel_1.state(!0),ex_search_sel_2.createSelection(".ex_search_select_2"),ex_search_sel_3.createSelection(".ex_search_select_3")}function loadContent(e,t,a){a?$(e).load(t,a):$(e).load(t)}function findParent(e,t){for(;!e.hasClass(t);)if(e=e.parent(),"body"==e.prop("tagName").toLowerCase())return;return e}function addCarsTypeToList(){var e=1;$(".content_nav .nav_main .type").each(function(){$(".content_nav .nav_main .type:eq("+(e-1)+")").attr("data-car-type",e),e++})}function setSelection(e,t,a){e.addDataIndexForDOMElemens(a),e.reset(),e.addValuesToList(t),e.createOptionList(),e==Select_1?($(".content_products").addClass("grid"),Select_2.state(!1),Select_2.reset(),Select_3.state(!1),Select_3.reset()):e==Select_2&&($(".content_products").addClass("grid"),Select_3.state(!1),Select_3.reset())}function CollectRequestData(e){function t(){$(e).find(a.item).each(function(){var e=$(this).find(a.value).text(),t=$(this).find(a.amount).text();i[e]=t})}this.item="single_item_selector",this.value="value_selector",this.amount="amount_selector",this.adapt_data=function(){return t(),JSON.stringify(i)};var a=this,i={}}function sendData(e,t){jQuery.ajax({url:"ajax.php",type:"POST",data:e,success:function(a){a&&"Hi"!=a?(console.log("response is"),t(a)):(console.log("response not"),t()),console.log(e),console.log("success")},error:function(e){cart_error||(cart_error=new ModalWindow(".page_cart_modal_error")),cart_error.activateElement(),cart_error.windowClose(".page_cart_modal_error .close, .page_cart_modal_error .back"),console.log("error")}})}function sendModalSelect(e,t){jQuery.ajax({url:"ajax.php",type:"POST",data:e,success:function(e){e=["1","2","3"],t.fillImportedList(e),t.createOptionList()},error:function(e){var t=new ModalWindow(".page_cart_modal_error");t.activateElement(),t.windowClose(".page_cart_modal_error .close, .page_cart_modal_error .back"),console.log("error")}})}function setImageAsBg(e,t){$(e).each(function(){findParent($(this),t).css("background-image","url("+$(this).attr("src")+")")})}function setLinkFromDataAttr(e,t,a){var i=a||"data-product-link";$("body").on("click",e,function(){var e=findParent($(this),t).attr(i);window.open(e)})}function CollectFormData(e){function t(){$(e).find("input").each(function(){var e=$(this).attr("data-key"),t=encodeURI($(this).val());a[e]=t}),$(e).find("textarea").each(function(){var e=$(this).attr("data-key"),t=encodeURI($(this).val());a[e]=t}),$(e).find(".select").each(function(){var e=$(this).prev().attr("data-key"),t=$(this).find(".select-styled.changed").text();a[e]=t})}this.adapt_data=function(){return t(),JSON.stringify(a)};var a={}}function collectFormDataToStack(){var e=new CollectFormData('[data-modal-name="'+findParent($(this),"modal_window").attr("data-modal-name")+'"]');Register_Data[findParent($(this),"modal_window").attr("data-modal-name")]=e.adapt_data();for(key in Register_Data)console.log(key+":"+Register_Data[key])}function setMainSelection(e){manageMenuButtons.call($(".content_nav .nav_main .type[data-car-type="+e.main_tab_index+"]"),".content_nav .nav_main .type"),hideBlock(".content_products_wrapper >div",".content_panel .views"),$(".content_products").removeClass("grid"),Select_1.listClicked(Select_1.imported_list[e.current_auto],Select_1.imported_list[e.current_auto],$(".select_1")),Select_2.imported_list=e.list_of_models,Select_2.listClicked(Select_2.imported_list[e.current_model],Select_2.imported_list[e.current_model],$(".select_2")),Select_2.createOptionList(),Select_2.state(!0),Select_3.imported_list=e.list_of_motors,Select_3.listClicked(Select_3.imported_list[e.current_motor],Select_3.imported_list[e.current_motor],$(".select_3")),Select_3.createOptionList(),Select_3.state(!0),loadContent(".content_products_wrapper","../index_result_full.html .result_full",index_results.resultHasLoaded)}function PlusMinusControls(e){function t(e){var t=findParent($(this),o.wrapper),i=+$(t).find(o.amount).text();e?a(++i,t):a(--i,t);var s=findParent($(this),o.productParent);n.call(s),o.checkTotalSumm.call($(o.globalWrapper+" ."+o.productParent))}function a(e,t){e<1&&(e=1),t.find(o.amount).text(e)}function i(){$(this).hasClass(o.controlDecrease)?t.call(this,!1):$(this).hasClass(o.controlIncrease)&&t.call(this,!0)}function n(){var e=+$(this).find(o.productPrice).text(),t=+$(this).find("."+o.wrapper+" "+o.amount).text();$(this).find(o.productSumm).html(Math.round(e*t))}this.addListeners=function(t){$("body").on(t,e,function(e){i.call(e.target)})},this.controlDecrease="minus",this.controlIncrease="plus",this.amount=".num span",this.wrapper="amount",this.productParent="single_product",this.productPrice=".price span",this.productSumm=".summ span",this.totalSumm=".page_cart .total span",this.globalWrapper=".page_cart";var o=this;this.checkTotalSumm=function(){var e=0;$(this).each(function(){e+=+$(this).find(o.productSumm).text()}),$(o.totalSumm).html(e)}}function checkLocation(){var e=$(location).attr("href");if(e.indexOf("#")!=-1){var t=e.indexOf("#");if(e.indexOf("?")!=-1)var a=e.indexOf("?");switch(e.slice(t,a||e.length)){case"#results":setMainSelection({main_tab_index:3,list_of_models:[1,2,3,4,5,6,7],list_of_motors:[0,9,8,7,6,5],current_auto:4,current_model:2,current_motor:2});break;case"":}}}function initMap(){var e={zoom:7,center:{lat:49.605766,lng:34.563408},disableDefaultUI:!0,styles:styleArray};map_contacts=new google.maps.Map(document.querySelector(map_selector),e);new google.maps.Marker({position:{lat:48.409968,lng:35.036143},map:map_contacts,title:"Intelli",icon:map_marker})}function ModalWindow(e){function t(e){try{e.attr("style","");for(var t=0;t<r.length;t++){var a=r[t].split(":");e.css(a[0],[1])}}catch(e){return void console.log(e)}}function a(){l.preventScroll&&$("body").on("wheel keydown touchstart touchmove",i)}function i(e){"keydown"==e.type?"40"!=e.keyCode&&"38"!=e.keyCode||(e.preventDefault(),e.stopImmediatePropagation()):"wheel"==e.type?(e.preventDefault(),e.stopImmediatePropagation()):"touchstart"==e.type?this.firstCoord=this.getTouchCoord(e):"touchmove"==e.type?this.lastCoord=this.getTouchCoord(e):"touchend"==e.type&&(this.lastCoord-this.firstCoord>10?(e.preventDefault(),e.stopImmediatePropagation()):this.lastCoord-this.firstCoord<-10&&(e.preventDefault(),e.stopImmediatePropagation()))}function n(){$("body").off("wheel keydown touchstart touchmove",i)}CollectFormData.call(this,e);var o=$(e);this.transition_time=300,this.preventScroll=!0,this.windowOpen=function(e){$("body").on("click",e,function(e){l.activateElement()})},this.windowClose=function(e){$("body").on("click",e,function(e){l.deactivateElement()})},this.activateElement=function(){a(),s=o.attr("style");try{r=s.split(";")}catch(e){console.log(e),r=null}o.css("display","block"),t(window),o.css("transition",l.transition_time+"ms"),setTimeout(function(){o.addClass("active")},100)};var s,r,l=this;this.deactivateElement=function(){n(),o.removeClass("active"),setTimeout(function(){t(o)},l.transition_time)}}function Navigation(e){function t(e){var t=$(this).find(e);o=t.attr("style");try{s=o.split(";")}catch(e){console.log(e),s=null}$.each(r.changing_properties,function(e,a){t.css(e,a)}),i(t),t.css("transition",r.transition_time+"ms"),setTimeout(function(){t.addClass("active")},100)}function a(e){var t=$(this).find(e);t.removeClass("active"),setTimeout(function(){i(t)},r.transition_time)}function i(e){try{for(var t=0;t<s.length;t++){var a=s[t].split(":");e.css(a[0],[1])}}catch(e){return void console.log(e)}}function n(e){return $(this).find(e).hasClass("active")?a.call(this,e):t.call(this,e)}this.transition_time=0,this.changing_properties={},this.addListeners=function(t,a){$("body").on(t,e,function(e){n.call(e.target,a)})};var o,s,r=this}function Results(e){function t(){l=!1;var e=+$(this).attr("class").slice(-1)-1;$(this).addClass("show");var t=$(this),a=t.parent().parent().parent().attr("data-index"),i=+t.parent().parent().parent().find(".tab_panel").innerHeight();setTimeout(function(){t.parent().parent().css("height",+r[a][e]+i),t.css("opacity",1),l=!0},100)}function a(){var e=$(this).parent().parent().find(".show");e.removeClass("show"),setTimeout(function(){e.css("opacity",0)},100)}function i(){var e=findParent($(this),"single_result");if($(this).hasClass("active")){var a=$(this);l&&(l=!1,e.find(".single_result_extend").css("height",0),setTimeout(function(){a.removeClass("active"),e.find(".tab_panel .show").css("opacity","0"),e.find(".tab_panel .show").removeClass("show"),e.find(".single_result_extend .tab_panel .tab").removeClass("active"),l=!0},500))}else{$(this).addClass("active");var i=+e.find(".tab_panel").innerHeight();l&&(l=!1,e.find(".single_result_extend").css("height",+r[e.attr("data-index")][0]+i),e.find(".single_result_extend .tab_panel .tab:eq(0)").addClass("active"),t.call(e.find(".tab_1")),l=!0)}}function n(){if(!$(this).hasClass("active")&&l){$(this).parent().find(".active").removeClass("active"),$(this).addClass("active");var e=".tab_"+(+$(this).attr("data-tab-num")+1),i=findParent($(this),"single_result_extend").find(e);a.call(this),t.call(i),o()}}function o(){$(s.single_result_selector+" .tab_2").find(".main_title").removeClass("active"),$(s.single_result_selector+" .tab_2").find(".single_model_title").removeClass("active"),$(s.single_result_selector+" .tab_2").find(".single_model").css("height","0"),$(s.single_result_selector+" .tab_2").parent().find(".model_content").css("height","0")}this.results_wrapper=e,this.single_result_selector=this.results_wrapper+" .single_result",this.single_result_extend_trigger_selector="",this.selector_select=this.results_wrapper+" .result_full_panel .sort_by select",this.selector_img_in_single_product=this.single_result_selector+" .img img",this.single_result_extend=this.single_result_selector+" .single_result_extend";var s=this;this.numerateResultsOnPage=function(){var e=0;$(s.single_result_selector).each(function(){$(this).attr("data-index",e++)})},this.numerateTabs=function(){$(s.single_result_selector).each(function(){var e=0;$(this).find(".tab_panel .tab").each(function(){$(this).attr("data-tab-num",e++)})})};var r,l=!0;this.resultHasLoaded=function(){addCustomSelect(s.selector_select),setImgAsBg(s.selector_img_in_single_product),s.numerateResultsOnPage(),s.numerateTabs(),s.calcSizesOfTabs()},this.calcSizesOfTabs=function(){$(s.single_result_extend).addClass("expand"),r={},$(s.single_result_extend).each(function(){var e=$(this).parent().attr("data-index");r[e]={};var t=0;$(this).find(".tab_container >*").each(function(){r[e][t++]=$(this).innerHeight()}),$(this).removeClass("expand")})},setLinkFromDataAttr(s.single_result_selector+" .top_row .vendor,"+s.single_result_selector+" .top_row .mid_h","single_result");var c=new ModalWindow(".modal_preview");c.windowOpen(s.single_result_selector+" .img"),c.windowClose(".modal_preview .close"),$("body").on("click",s.single_result_selector+" .img",function(){var e=$(this).find("img").attr("src");$(".modal_preview img").attr("src",e)}),$("body").on("click",s.single_result_selector+" .show_more",function(){i.call(this)}),$("body").on("click",s.single_result_selector+" .tab_panel .tab",function(){n.call(this)})}function Selection(){var e=this;this.addDataIndexForDOMElemens=function(e){var t=0;$(e).each(function(){$(this).attr("data-index",t),t++})},this.state=function(e){e?this.styledSelect.removeClass("disabled"):this.styledSelect.addClass("disabled")},this.addValuesToList=function(e){this.imported_list=[];var t=this;$(e).each(function(){t.imported_list.push($(this).text())})},this.fillImportedList=function(t){e.imported_list=[],$.each(t,function(){e.imported_list.push($(this)[0])})},this.imported_list=[],this.reset=function(){this.styledSelect.html(this.selector.children("option").eq(0).html()),this.list.empty(),this.styledSelect.removeClass("changed")},this.createOptionList=function(){this.imported_list.length>0?imported_list=this.imported_list:(this.selector.children("option").each(function(){"hide"!=$(this).val()&&e.imported_list.push($(this).text())}),imported_list=this.imported_list),this.list.empty();for(var t=0;t<imported_list.length;t++)$("<li />",{text:imported_list[t],rel:imported_list[t]}).appendTo(this.list);this.listItems=this.list.children("li");var a=this;this.listItems.on("click",function(e){a.fieldValue=$(this).html(),a.fieldRel=$(this).attr("rel"),a.listClicked(a.fieldValue,a.fieldRel,a.selector),a.list.hide()})},this.listClicked=function(e,t,a){this.styledSelect.addClass("changed"),this.styledSelect.html(e).removeClass("active"),a.val(t)},this.createSelection=function(t){this.selector=$(t);var a;""!=this.imported_list?a=this.imported_list:(this.selector.children("option").each(function(){"hide"!=$(this).val()&&e.imported_list.push($(this).text())}),a=this.imported_list);a.length;this.selector.addClass("select-hidden"),this.selector.wrap('<div class="select"></div>'),this.selector.after('<div class="select-styled"></div>'),this.styledSelect=this.selector.next("div.select-styled"),this.list=$('<ul class="select-options" />'),this.list.insertAfter(this.styledSelect),this.reset(),this.createOptionList(),this.state(!1),this.styledSelect.on("click",function(e){e.stopPropagation(),$(this).hasClass("disabled")||($("div.select-styled.active").not(this).each(function(){$(this).removeClass("active").next("ul.select-options").hide()}),$(this).toggleClass("active").next("ul.select-options").toggle())});var i=this;$(document).on("click",function(){i.styledSelect.removeClass("active"),i.list.hide()})}}function validateForm(e,t,a){$(e).validate({invalidHandler:function(){a&&(console.log("error"),a())},submitHandler:function(){t&&(console.log("success"),t())},rules:{name:{required:!0},pass:{required:!0},email:{required:!0,email:!0},code:{required:!0,number:!0,minlength:8,maxlength:8},city:{required:!0},adress:{required:!0},tel:{required:!0,number:!0},comment:{required:!0,maxlength:800},pass_reg:{required:!0},pass_confirm:{equalTo:"[name='pass_reg']"},num_0:{number:!0},num_1:{number:!0},num_2:{number:!0},num_3:{number:!0}},messages:{pass:{required:"Необходимо ввести пароль"},email:{required:"Необходимо ввести адрес почты",email:"Необходимо ввести адрес в правильном формате"},code:{required:"Необходимо ввести действительный код",minlength:"Необходимо ввести действительный код",maxlength:"Необходимо ввести действительный код",number:"Необходимо ввести действительный код"},city:{required:"Необходимо ввести город"},adress:{required:"Необходимо ввести действительный адрес"},tel:{required:"Необходимо ввести телефон",number:"Необходимо ввести только цифры"},comment:{required:"Напишите суть своего обращения",maxlength:"Сообщение слишком длинное. Максимум 800 символов"},name:{required:"Необходимо ввести имя"},pass_reg:{required:"Необходимо ввести пароль"},pass_confirm:{equalTo:"Ошибка ввода"},num_0:{number:"Вы должны указать число"},num_1:{number:"Вы должны указать число"},num_2:{number:"Вы должны указать число"},num_3:{number:"Вы должны указать число"}},errorClass:"invalid",validClass:"success",errorLabelContainer:".error_message",wrapper:"li",errorElement:"span"})}addCustomSelect(".footer_top .lang select"),addCarsTypeToList(),$(document).ready(function(){$(".nano").mCustomScrollbar({setHeight:$(window).height(),setWidth:"100%",autoDraggerLength:!1,theme:"scroll-logo",callbacks:{whileScrolling:function(){changeHeaderView(this.mcs.top),$(".popup_small_cart").removeClass("active"),$(".popup_small_cart").css("display","none"),$(".popup_small_garage").removeClass("active"),$(".popup_small_garage").css("display","none")}}})});var Select_1=new Selection,Select_2=new Selection,Select_3=new Selection;Select_1.addDataIndexForDOMElemens(".content_products .product"),Select_1.addValuesToList(".content_products .product .title"),Select_1.createSelection(".main_list .select_1"),Select_1.state(!0),Select_2.createSelection(".main_list .select_2"),Select_3.createSelection(".main_list .select_3");var modal_reg_1_sel_1=new Selection;modal_reg_1_sel_1.addValuesToList(".content_products .product .title"),modal_reg_1_sel_1.createSelection(".modal_reg_1_sel_0"),modal_reg_1_sel_1.state(!0);var modal_reg_1_sel_2=new Selection;modal_reg_1_sel_2.createSelection(".modal_reg_1_sel_1");var modal_reg_1_sel_3=new Selection;modal_reg_1_sel_3.createSelection(".modal_reg_1_sel_2");var small_cart=new Navigation(".header_bottom .cart");small_cart.changing_properties={display:"block"},small_cart.transition_time=500,small_cart.addListeners("click",".popup_small_cart"),$(".header_bottom .cart").on("click",function(){$(".popup_small_garage").removeClass("active"),$(".popup_small_garage").css("display","none")});var small_garage=new Navigation(".header_bottom .garage");small_garage.changing_properties={display:"block"},small_garage.transition_time=500,small_garage.addListeners("click",".popup_small_garage");var small_garage_sel=new Selection;small_garage_sel.createSelection(".popup_small_garage .select_auto select"),small_garage_sel.state(!0),setImgAsBg(".popup_small_garage .img img"),$("body").on("click",".popup_small_garage .select_auto .select-options li",function(){sendData("some_data",setMainSelection.bind(null,{main_tab_index:2,list_of_models:[1,2,3,4,5,6,7],list_of_motors:[0,9,8,7,6,5],current_auto:4,current_model:2,current_motor:2}))}),$(".header_bottom .garage").on("click",function(){$(".popup_small_cart").removeClass("active"),$(".popup_small_cart").css("display","none")}),$(".grid_view .list").on("click",function(){toggleGridClasses()}),$(".grid_view .grid").on("click",function(){toggleGridClasses()}),$(".sort_az_letter").on("click",function(e){changeAlphabetSort.call(this,e)}),$(".sort_az .az_trigger").on("click",function(){showAlphabetSort.call(this)}),$(".content_nav .nav_main .type").on("click",function(){function e(){Select_1.reset(),Select_2.reset(),Select_3.reset()}manageMenuButtons.call(this,".content_nav .nav_main .type"),hideBlock($(".content_products .content_products_wrapper >div"));var t=".cars_type_"+$(this).attr("data-car-type"),a=$(t);!$(".content_products_wrapper").find(t).length>0?$(this).attr("data-car-type")<4?($(".content_panel").css("display","block"),$(".content_products").addClass("grid"),loadContent(".content_products_wrapper","../index_cars_type.html "+t,setSelection.bind(null,Select_1,".content_products .product .title",".content_products .product"))):($(".content_products").removeClass("grid"),$(".content_panel").css("display","none"),loadContent(".content_products_wrapper","../index_result_full.html .result_full",index_results.resultHasLoaded),e()):showBlock(a)});var ex_search_sel_1=new Selection,ex_search_sel_2=new Selection,ex_search_sel_3=new Selection;$("body").on("click",".expand_search_content .submit",function(){function e(){function e(){new Results(".expand_search .search_result").resultHasLoaded()}$(".expand_search .search_result").empty(),loadContent(".expand_search .search_result","../index_result_full.html .result_full >*",e)}validateForm("[name='expand_search_form']",e)}),$("body").on("click",".expand_search .select:eq(0) .select-options li",function(){ex_search_sel_2.reset(),sendModalSelect($(this).text(),ex_search_sel_2),ex_search_sel_2.state(!0),ex_search_sel_3.reset(),ex_search_sel_3.state(!1)}),$("body").on("click",".expand_search .select:eq(1) .select-options li",function(){ex_search_sel_3.reset(),sendModalSelect($(this).text(),ex_search_sel_3),ex_search_sel_3.state(!0)}),$(".tab_2").on("click",function(){$(".expand_search").length<1&&loadContent(".nav_expand","../index_variants.html .expand_search",createExpandSearchSelects),$(this).hasClass("active")?(hideBlock(".expand_search"),showBlock(".main_list",".nav_main")):(hideBlock(".main_list",".nav_main"),showBlock(".expand_search")),toggleClassOfFewElem.call(null,this)}),$("body").on("click",".expand_search .nav_types .type",function(){$(this).hasClass("active")||($(".expand_search .nav_types .type.active").removeClass("active"),$(this).addClass("active"))}),$("body").on("click",".expand_search .details .tabs >div",function(){$(this).hasClass("active")||($(".expand_search .details .tabs .active").removeClass("active"),$(this).addClass("active"),$(".expand_search .expand_search_content .expand_tab").css("display","none"),$(".expand_search .expand_search_content .expand_tab:eq("+$(this).attr("data-expand-tab")+")").css("display","block"))}),$("body").on("click",".expand_search .details .axis >div",function(){$(this).hasClass("active")||($(".expand_search .details .axis .active").removeClass("active"),$(this).addClass("active"))}),$("body").on("click",".expand_search .single_result .tab_2 .main_title",function(){showResultTab2Level1.call(this)}),$("body").on("click",".expand_search .single_result .tab_2 .single_model_title",function(){showResultTab2Level2.call(this)}),$("body").on("click",".main_list .filters .select:eq(0) .select-options li, .content_products .product",function(){hideBlock(".content_products_wrapper >div",".content_panel .views"),loadContent(".content_products_wrapper","../index_result.html .result_grid",showModelResults)}),$("body").on("click",".content_products .product",function(){var e=$(this).attr("data-index");Select_1.listClicked(Select_1.imported_list[e],Select_1.imported_list[e],$(".select_1"))}),$("body").on("click",".result_grid .model_choosing .model",function(){var e=$(this).attr("data-index");Select_2.listClicked(Select_2.imported_list[e],Select_2.imported_list[e],$(".select_2")),actionForModelChoosing()}),$("body").on("click",".main_list .filters .select:eq(1) .select-options li, .result_grid .single_result",function(){if($(this).find(".model").length>1)return void smoothShow.call(this,".model_choosing","table");actionForModelChoosing()}),$("body").on("click",".main_list .filters .select:eq(2) .select-options li, .result_list .result_list_row",function(){$(".content_products").removeClass("grid"),hideBlock(".content_products_wrapper >div",".content_panel .views"),loadContent(".content_products_wrapper","../index_result_full.html .result_full",index_results.resultHasLoaded);var e=$(this).find('[data-value="motor"]').attr("data-index");Select_3.listClicked(Select_3.imported_list[e],Select_3.imported_list[e],$(".select_3"))});var index_results=new Results(".result_full");$("body").on("click",".result_full .single_result .tab_2 .main_title",function(){showResultTab2Level1.call(this)}),$("body").on("click",".result_full .single_result .tab_2 .single_model_title",function(){showResultTab2Level2.call(this)}),$("body").on("click",".single_result_page .models_info .main_title",function(){showResultTab2Level1.call(this)}),$("body").on("click",".single_result_page .models_info .single_model_title",function(){showResultTab2Level2.call(this)});var cart_content;checkCartIsEmpty(),setImageAsBg(".page_cart .single_product .img img","img"),setLinkFromDataAttr(".page_cart .single_product .img, .page_cart .single_product .vendor, .page_cart .single_product .title","single_product"),$(".page_cart_modal_confirm .confirm").on("click",function(){cart_content=new CollectRequestData(".page_cart .products"),cart_content.value=".vendor",cart_content.amount=".amount .num span",cart_content.item=".single_product",sendData(cart_content.adapt_data(),respondCartSuccess)}),$(".page_cart .remove_from_cart").on("click",function(){findParent($(this),"single_product").remove(),page_cart_amount.checkTotalSumm.call($(".page_cart .single_product")),checkCartIsEmpty()});var page_cart_amount=new PlusMinusControls(".page_cart .single_product .amount");page_cart_amount.addListeners("click"),page_cart_amount.amount=".num span";var cart_confirm=new ModalWindow(".page_cart_modal_confirm");cart_confirm.windowOpen(".page_cart .bottom_panel .order:not(.unavaliable)"),cart_confirm.windowClose(".page_cart_modal_confirm .close, .page_cart_modal_confirm .back, .page_cart_modal_confirm .confirm"),$("body").on("click",".modal_registration_2_1 .select:eq(0) .select-options li",function(){modal_reg_1_sel_2.reset(),sendModalSelect($(this).text(),modal_reg_1_sel_2),modal_reg_1_sel_2.state(!0),modal_reg_1_sel_3.reset(),modal_reg_1_sel_3.state(!1)}),$("body").on("click",".modal_registration_2_1 .select:eq(1) .select-options li",function(){modal_reg_1_sel_3.reset(),sendModalSelect($(this).text(),modal_reg_1_sel_3),modal_reg_1_sel_3.state(!0)}),$("body").on("click",".modal_registration_2_1 .select:eq(2) .select-options li",function(){setErrorMessage(!0)});var modal_consult=new ModalWindow(".modal_consult");modal_consult.windowOpen(".header_bottom .consult"),modal_consult.windowClose(".modal_consult .close"),$("body").on("click",".modal_consult .submit",function(){validateForm("[name="+findParent($(this),"modal_window").find("form").attr("name")+"]",sendData.bind(null,modal_consult.adapt_data(),modal_consult.deactivateElement))});var modal_authorization=new ModalWindow(".modal_authorization");modal_authorization.windowOpen(".header_top .status, .page_print .author.button"),modal_authorization.windowClose(".modal_authorization .close"),$("body").on("click",".modal_authorization .submit",function(){var e=modal_authorization.adapt_data();validateForm("[name="+findParent($(this),"modal_window").find("form").attr("name")+"]",sendData.bind(null,e,modal_authorization.deactivateElement))});var modal_restore_pass;$("body").on("click",".modal_authorization .restore_pass",function(){modal_authorization.deactivateElement(),modal_restore_pass||(modal_restore_pass=new ModalWindow(".modal_restore_pass"),modal_restore_pass.windowClose(".modal_restore_pass .close")),modal_restore_pass.activateElement()}),$("body").on("click",".modal_restore_pass .submit",function(){function e(){modal_restore_pass.deactivateElement();var e=new ModalWindow(".modal_restore_pass_success");e.windowClose(".modal_restore_pass_success .close"),e.activateElement()}var t=modal_restore_pass.adapt_data();validateForm("[name="+findParent($(this),"modal_window").find("form").attr("name")+"]",sendData.bind(null,t,e))});var modal_register_1;$("body").on("click",".modal_authorization .register, .page_print .register.button",function(){modal_authorization.deactivateElement(),modal_register_1||(modal_register_1=new ModalWindow(".modal_registration_1"),
modal_register_1.windowClose(".modal_registration_1 .close")),modal_register_1.activateElement()});var modal_register_2_1,modal_register_2_2;$("body").on("click",".modal_registration_1 .customer",function(){modal_register_1.deactivateElement(),modal_register_2_1||(modal_register_2_1=new ModalWindow(".modal_registration_2_1"),modal_register_2_1.windowClose(".modal_registration_2_1 .close")),modal_register_2_1.activateElement()}),$("body").on("click",".modal_registration_1 .partner",function(){modal_register_1.deactivateElement(),modal_register_2_2||(modal_register_2_2=new ModalWindow(".modal_registration_2_2"),modal_register_2_2.windowClose(".modal_registration_2_2 .close")),modal_register_2_2.activateElement()}),$("body").on("click",".modal_registration_2_1 .close, .modal_registration_2_2 .close, .modal_registration_3 .close, .modal_registration_4 .close",function(){Register_Data={},console.log("deleted");for(key in Register_Data)console.log("key:"+Register_Data[key])});var modal_register_3;$("body").on("click",".modal_registration_2_1 .next",function(){var e=!0;$(".modal_registration_2_1 .select-styled").each(function(){$(this).hasClass("changed")||(e=!1)}),setErrorMessage(e),e&&(collectFormDataToStack.call(this),modal_register_2_1.deactivateElement(),modal_register_3||(modal_register_3=new ModalWindow(".modal_registration_3"),modal_register_3.windowClose(".modal_registration_3 .close")),modal_register_3.activateElement())}),$("body").on("click",".modal_registration_2_2 .next",function(){function e(){console.log("hi"),collectFormDataToStack.call(this),modal_register_2_2.deactivateElement(),modal_register_3||(modal_register_3=new ModalWindow(".modal_registration_3"),modal_register_3.windowClose(".modal_registration_3 .close")),modal_register_3.activateElement()}validateForm("[name="+findParent($(this),"modal_window").find("form").attr("name")+"]",e.bind(this))});var modal_register_4;$("body").on("click",".modal_registration_3 .next",function(){function e(){collectFormDataToStack.call(this),modal_register_3.deactivateElement(),modal_register_4||(modal_register_4=new ModalWindow(".modal_registration_4"),modal_register_4.windowClose(".modal_registration_4 .close")),modal_register_4.activateElement()}validateForm("[name="+findParent($(this),"modal_window").find("form").attr("name")+"]",e.bind(this))}),$("body").on("click",".modal_registration_4 .finish",function(){function e(){function e(){t.activateElement(),Register_Data={}}collectFormDataToStack.call(this),modal_register_4.deactivateElement();var t=new ModalWindow(".modal_registration_success");t.windowClose(".modal_registration_success .close"),sendData(JSON.stringify(Register_Data),e)}validateForm("[name="+findParent($(this),"modal_window").find("form").attr("name")+"]",e.bind(this))}),$(document).ready(function(){setImgAsBg(".single_article .img img"),news.length=700,news.addExpandTextToArray(),$("body").on("click touchstart",".single_article .show_more",function(){news.expandText(this)}),$("body").on("click touchstart",".single_article .show_less",function(){news.hideText(this)})}),setLinkFromDataAttr(".profile_tab_content.orders .order_element","order_element","data-single-order-link"),setImgAsBg(".profile_tab_content.history .single_product .img img"),$("body").on("click",".profile_tab_content.history .single_product",function(e){manageProductCell.call(this,e,".profile_tab_content.history .single_product","single_product")});var modal_profile=new ModalWindow(".modal_profile");modal_profile.windowOpen(".profile_tab_content.garage .add_auto, .profile_tab_content.garage .edit_auto"),modal_profile.windowClose(".modal_profile .close, .modal_profile .button.confirm");var GarageModal={};$("body").on("click",".profile_tab_content.garage .add_auto, .profile_tab_content.garage .edit_auto",function(){GarageModal={0:!0,1:!1,2:!1,3:!1,4:!1},manageGarageModal(0)}),$("body").on("click",".profile_tab_content.garage .modal_window.modal_profile [data-main]",function(){var e=parseInt(findParent($(this),"modal_tab").attr("data-profile-modal-tab"))+1;GarageModal[e]=!0,manageGarageModal(e)}),$("body").on("click",".profile_tab_content.garage .modal_window.modal_profile .modal_steps li",function(){if($(this).hasClass("active")){manageGarageModal($(this).attr("data-profile-modal-tab"))}}),$("body").on("click",".profile_tab_content.garage .modal_window.modal_profile .modal_steps li:eq(2), [data-main]",function(){$(".profile_tab_content.garage .modal_window.modal_profile .modal_tab.model .single_result").each(function(){$(this).find(".model_choosing .model").length<2&&$(this).find(".title").text($(this).find(".model_choosing .model").text()).attr("data-main",$(this).find(".model_choosing .model").attr("data-main"))})}),$("body").on("click",".profile_tab_content.garage .modal_window.modal_profile .modal_tab.model .single_result",function(){if($(this).find(".model").length>1)return void smoothShow.call(this,".model_choosing","table")}),setImgAsBg(".modal_tab.confirm_choosing .img img");var select_garage=new Selection;select_garage.createSelection(".profile_tab_content.garage .select_auto select"),select_garage.state(!0);var page_garage_result_test=0;$("body").on("click",".profile_tab_content.garage .select_auto .select li",function(){function e(e){var t=0;$(".profile_tab_content.garage .search_params .search_param").each(function(){$(this).find("span").html(e[t]),t++})}$(".profile_tab_content.garage .search_result").empty(),sendData($(this).text(),e.bind(null,[page_garage_result_test++,page_garage_result_test++,page_garage_result_test++,page_garage_result_test++,page_garage_result_test++]))}),$("body").on("click",".profile_tab_content.garage .search_result .single_product",function(e){manageProductCell.call(this,e,".profile_tab_content.garage .search_result .single_product","single_product")}),$("body").on("click",".profile_tab_content.garage .search_param",function(){$(".profile_tab_content.garage .search_result").empty(),loadContent(".profile_tab_content.garage .search_result","../page_profile_history.html .history_wrapper >*",setImgAsBg.bind(null,".profile_tab_content.garage .search_result .img img"))}),setImgAsBg(".page_compare .col_product .img img"),$(".col_product .close").on("click",function(){findParent($(this),"col_product").css("width","0");var e=$(this);setTimeout(function(){findParent(e,"col_product").remove()},300)});var new_positions_select_1=new Selection;new_positions_select_1.createSelection(".new_positions_select_1"),new_positions_select_1.state(!0);var new_positions_select_2=new Selection;new_positions_select_2.createSelection(".new_positions_select_2"),new_positions_select_2.state(!0),$("body").on("click",".new_positions .submit",function(){function e(){new Results(".new_positions .search_result").resultHasLoaded()}console.log("123"),$(".new_positions .search_result").empty(),loadContent(".new_positions .search_result","../index_result_full.html .result_full >*",e)}),$("body").on("click",".new_positions .nav_types .type",function(){$(this).hasClass("active")||($(".new_positions .nav_types .type.active").removeClass("active"),$(this).addClass("active"))}),$("body").on("click",".new_positions .details .tabs >div",function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")}),$("body").on("click",".new_positions .details .axis >div",function(){$(this).hasClass("active")||($(".new_positions .details .axis .active").removeClass("active"),$(this).addClass("active"))}),$("body").on("click",".new_positions .single_result .tab_2 .main_title",function(){showResultTab2Level1.call(this)}),$("body").on("click",".new_positions .single_result .tab_2 .single_model_title",function(){showResultTab2Level2.call(this)}),$("body").on("click",".single_result .compare",function(){var e=findParent($(this),"results_wrapper").prev().find(".compare span");if($(this).hasClass("active")){$(this).removeClass("active");var t=+e.text();t>0&&e.html(""+--t)}else{$(this).addClass("active");var t=+e.text();e.html(""+ ++t)}}),$("body").on("click",".result_full_panel .compare",function(){window.open("../page_compare.html")}),$("body").on("click",".single_result .cart, .single_product .cart",function(){function e(e){return e=e.split(" "),console.log(e),e=e.join(""),+e}$(this).addClass("active"),$(".header_bottom .cart .items_amount").text(+$(".header_bottom .cart .items_amount").text()+1);var t,a=parseInt($(".popup_small_cart .str_amount span").text());t=1===a?" товар":a>1&&a<5?" товара":" товаров",$(".popup_small_cart .str_amount span").text(++a+t);var i=e($(".popup_small_cart .str_summ span").text());console.log(i),i+=e($(this).prev().find("span").text()),$(".popup_small_cart .str_summ span").text(i)});var content_panel_h=$(".content_products").height();$(".content_products").css("min-height",content_panel_h+"px");var cart_error,Register_Data={};checkLocation(),!function(e,t){"use strict";function a(e,t,a){var i=e.children(),n=!1;e.empty();for(var s=0,r=i.length;s<r;s++){var l=i.eq(s);if(e.append(l),a&&e.append(a),o(e,t)){l.remove(),n=!0;break}a&&a.detach()}return n}function i(t,a,s,r,l){var c=!1;return t.contents().detach().each(function(){var d=this,u=e(d);if(void 0===d)return!0;if(u.is("script, .dotdotdot-keep"))t.append(u);else{if(c)return!0;t.append(u),!l||u.is(r.after)||u.find(r.after).length||t[t.is("a, table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style")?"after":"append"](l),o(s,r)&&(c=3==d.nodeType?n(u,a,s,r,l):i(u,a,s,r,l)),c||l&&l.detach()}}),a.addClass("is-truncated"),c}function n(t,a,i,n,r){var d=t[0];if(!d)return!1;var h=c(d),m=h.indexOf(" ")!==-1?" ":"　",p="letter"==n.wrap?"":m,f=h.split(p),_=-1,g=-1,v=0,b=f.length-1;if(n.fallbackToLetter&&0===v&&0===b&&(p="",f=h.split(p),b=f.length-1),n.maxLength)h=s(h.trim().substr(0,n.maxLength),n),l(d,h);else{for(;v<=b&&(0!==v||0!==b);){var w=Math.floor((v+b)/2);if(w==g)break;g=w,l(d,f.slice(0,g+1).join(p)+n.ellipsis),i.children().each(function(){e(this).toggle().toggle()}),o(i,n)?(b=g,n.fallbackToLetter&&0===v&&0===b&&(p="",f=f[0].split(p),_=-1,g=-1,v=0,b=f.length-1)):(_=g,v=g)}if(_==-1||1===f.length&&0===f[0].length){var x=t.parent();t.detach();var y=r&&r.closest(x).length?r.length:0;if(x.contents().length>y?d=u(x.contents().eq(-1-y),a):(d=u(x,a,!0),y||x.detach()),d&&(h=s(c(d),n),l(d,h),y&&r)){var C=r.parent();e(d).parent().append(r),e.trim(C.html())||C.remove()}}else h=s(f.slice(0,_+1).join(p),n),l(d,h)}return!0}function o(e,t){return e.innerHeight()>t.maxHeight||t.maxLength&&e.text().trim().length>t.maxLength}function s(t,a){for(;e.inArray(t.slice(-1),a.lastCharacter.remove)>-1;)t=t.slice(0,-1);return e.inArray(t.slice(-1),a.lastCharacter.noEllipsis)<0&&(t+=a.ellipsis),t}function r(e){return{width:e.innerWidth(),height:e.innerHeight()}}function l(e,t){e.innerText?e.innerText=t:e.nodeValue?e.nodeValue=t:e.textContent&&(e.textContent=t)}function c(e){return e.innerText?e.innerText:e.nodeValue?e.nodeValue:e.textContent?e.textContent:""}function d(e){do e=e.previousSibling;while(e&&1!==e.nodeType&&3!==e.nodeType);return e}function u(t,a,i){var n,o=t&&t[0];if(o){if(!i){if(3===o.nodeType)return o;if(e.trim(t.text()))return u(t.contents().last(),a)}for(n=d(o);!n;){if(t=t.parent(),t.is(a)||!t.length)return!1;n=d(t[0])}if(n)return u(e(n),a)}return!1}function h(t,a){return!!t&&("string"==typeof t?(t=e(t,a),!!t.length&&t):!!t.jquery&&t)}function m(e){for(var t=e.innerHeight(),a=["paddingTop","paddingBottom"],i=0,n=a.length;i<n;i++){var o=parseInt(e.css(a[i]),10);isNaN(o)&&(o=0),t-=o}return t}if(!e.fn.dotdotdot){e.fn.dotdotdot=function(t){if(0===this.length)return e.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){e(this).dotdotdot(t)});var n=this,s=n.contents();n.data("dotdotdot")&&n.trigger("destroy.dot"),n.data("dotdotdot-style",n.attr("style")||""),n.css("word-wrap","break-word"),"nowrap"===n.css("white-space")&&n.css("white-space","normal"),n.bind_events=function(){return n.bind("update.dot",function(t,r){switch(n.removeClass("is-truncated"),t.preventDefault(),t.stopPropagation(),typeof l.height){case"number":l.maxHeight=l.height;break;case"function":l.maxHeight=l.height.call(n[0]);break;default:l.maxHeight=m(n)}l.maxHeight+=l.tolerance,void 0!==r&&(("string"==typeof r||"nodeType"in r&&1===r.nodeType)&&(r=e("<div />").append(r).contents()),r instanceof e&&(s=r)),f=n.wrapInner('<div class="dotdotdot" />').children(),f.contents().detach().end().append(s.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var d=!1,u=!1;return c.afterElement&&(d=c.afterElement.clone(!0),d.show(),c.afterElement.detach()),o(f,l)&&(u="children"==l.wrap?a(f,l,d):i(f,n,f,l,d)),f.replaceWith(f.contents()),f=null,e.isFunction(l.callback)&&l.callback.call(n[0],u,s),c.isTruncated=u,u}).bind("isTruncated.dot",function(e,t){return e.preventDefault(),e.stopPropagation(),"function"==typeof t&&t.call(n[0],c.isTruncated),c.isTruncated}).bind("originalContent.dot",function(e,t){return e.preventDefault(),e.stopPropagation(),"function"==typeof t&&t.call(n[0],s),s}).bind("destroy.dot",function(e){e.preventDefault(),e.stopPropagation(),n.unwatch().unbind_events().contents().detach().end().append(s).attr("style",n.data("dotdotdot-style")||"").removeClass("is-truncated").data("dotdotdot",!1)}),n},n.unbind_events=function(){return n.unbind(".dot"),n},n.watch=function(){if(n.unwatch(),"window"==l.watch){var t=e(window),a=t.width(),i=t.height();t.bind("resize.dot"+c.dotId,function(){a==t.width()&&i==t.height()&&l.windowResizeFix||(a=t.width(),i=t.height(),u&&clearInterval(u),u=setTimeout(function(){n.trigger("update.dot")},100))})}else d=r(n),u=setInterval(function(){if(n.is(":visible")){var e=r(n);d.width==e.width&&d.height==e.height||(n.trigger("update.dot"),d=e)}},500);return n},n.unwatch=function(){return e(window).unbind("resize.dot"+c.dotId),u&&clearInterval(u),n};var l=e.extend(!0,{},e.fn.dotdotdot.defaults,t),c={},d={},u=null,f=null;return l.lastCharacter.remove instanceof Array||(l.lastCharacter.remove=e.fn.dotdotdot.defaultArrays.lastCharacter.remove),l.lastCharacter.noEllipsis instanceof Array||(l.lastCharacter.noEllipsis=e.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),c.afterElement=h(l.after,n),c.isTruncated=!1,c.dotId=p++,n.data("dotdotdot",!0).bind_events().trigger("update.dot"),l.watch&&n.watch(),n},e.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0,maxLength:null},e.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","　",",",";",".","!","?"],noEllipsis:[]}},e.fn.dotdotdot.debug=function(e){};var p=1,f=e.fn.html;e.fn.html=function(a){return a!=t&&!e.isFunction(a)&&this.data("dotdotdot")?this.trigger("update",[a]):f.apply(this,arguments)};var _=e.fn.text;e.fn.text=function(a){return a!=t&&!e.isFunction(a)&&this.data("dotdotdot")?(a=e("<div />").text(a).html(),this.trigger("update",[a])):_.apply(this,arguments)}}}(jQuery),jQuery(document).ready(function(e){e(".dot-ellipsis").each(function(){var t=e(this).hasClass("dot-resize-update"),a=e(this).hasClass("dot-timer-update"),i=0,n=e(this).attr("class").split(/\s+/);e.each(n,function(e,t){var a=t.match(/^dot-height-(\d+)$/);null!==a&&(i=Number(a[1]))});var o={};a&&(o.watch=!0),t&&(o.watch="window"),i>0&&(o.height=i),e(this).dotdotdot(o)})}),jQuery(window).on("load",function(){jQuery(".dot-ellipsis.dot-load-update").trigger("update.dot")}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e:e(jQuery,window,document)}(function(e){!function(t){var a="function"==typeof define&&define.amd,i="undefined"!=typeof module&&module.exports,n="https:"==document.location.protocol?"https:":"http:";a||(i?require("jquery-mousewheel")(e):e.event.special.mousewheel||e("head").append(decodeURI("%3Cscript src="+n+"//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js%3E%3C/script%3E"))),t()}(function(){var t,a="mCustomScrollbar",i="mCS",n=".mCustomScrollbar",o={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},s=0,r={},l=window.attachEvent&&!window.addEventListener?1:0,c=!1,d=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],u={init:function(t){var t=e.extend(!0,{},o,t),a=h.call(this);if(t.live){var l=t.liveSelector||this.selector||n,c=e(l);if("off"===t.live)return void p(l);r[l]=setTimeout(function(){c.mCustomScrollbar(t),"once"===t.live&&c.length&&p(l)},500)}else p(l);return t.setWidth=t.set_width?t.set_width:t.setWidth,t.setHeight=t.set_height?t.set_height:t.setHeight,t.axis=t.horizontalScroll?"x":f(t.axis),t.scrollInertia=t.scrollInertia>0&&t.scrollInertia<17?17:t.scrollInertia,"object"!=typeof t.mouseWheel&&1==t.mouseWheel&&(t.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),t.mouseWheel.scrollAmount=t.mouseWheelPixels?t.mouseWheelPixels:t.mouseWheel.scrollAmount,t.mouseWheel.normalizeDelta=t.advanced.normalizeMouseWheelDelta?t.advanced.normalizeMouseWheelDelta:t.mouseWheel.normalizeDelta,t.scrollButtons.scrollType=_(t.scrollButtons.scrollType),m(t),e(a).each(function(){var a=e(this);if(!a.data(i)){a.data(i,{idx:++s,opt:t,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:a.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var n=a.data(i),o=n.opt,r=a.data("mcs-axis"),l=a.data("mcs-scrollbar-position"),c=a.data("mcs-theme");r&&(o.axis=r),l&&(o.scrollbarPosition=l),c&&(o.theme=c,m(o)),g.call(this),n&&o.callbacks.onCreate&&"function"==typeof o.callbacks.onCreate&&o.callbacks.onCreate.call(this),e("#mCSB_"+n.idx+"_container img:not(."+d[2]+")").addClass(d[2]),u.update.call(null,a)}})},update:function(t,a){return e(t||h.call(this)).each(function(){var t=e(this);if(t.data(i)){var n=t.data(i),o=n.opt,s=e("#mCSB_"+n.idx+"_container"),r=e("#mCSB_"+n.idx),l=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")];if(!s.length)return;n.tweenRunning&&X(t),a&&n&&o.callbacks.onBeforeUpdate&&"function"==typeof o.callbacks.onBeforeUpdate&&o.callbacks.onBeforeUpdate.call(this),t.hasClass(d[3])&&t.removeClass(d[3]),t.hasClass(d[4])&&t.removeClass(d[4]),r.css("max-height","none"),r.height()!==t.height()&&r.css("max-height",t.height()),b.call(this),"y"===o.axis||o.advanced.autoExpandHorizontalScroll||s.css("width",v(s)),n.overflowed=S.call(this),B.call(this),o.autoDraggerLength&&x.call(this),y.call(this),k.call(this);var c=[Math.abs(s[0].offsetTop),Math.abs(s[0].offsetLeft)];"x"!==o.axis&&(n.overflowed[0]?l[0].height()>l[0].parent().height()?$.call(this):(G(t,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}),n.contentReset.y=null):($.call(this),"y"===o.axis?T.call(this):"yx"===o.axis&&n.overflowed[1]&&G(t,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==o.axis&&(n.overflowed[1]?l[1].width()>l[1].parent().width()?$.call(this):(G(t,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}),n.contentReset.x=null):($.call(this),"x"===o.axis?T.call(this):"yx"===o.axis&&n.overflowed[0]&&G(t,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),a&&n&&(2===a&&o.callbacks.onImageLoad&&"function"==typeof o.callbacks.onImageLoad?o.callbacks.onImageLoad.call(this):3===a&&o.callbacks.onSelectorChange&&"function"==typeof o.callbacks.onSelectorChange?o.callbacks.onSelectorChange.call(this):o.callbacks.onUpdate&&"function"==typeof o.callbacks.onUpdate&&o.callbacks.onUpdate.call(this)),V.call(this)}})},scrollTo:function(t,a){if(void 0!==t&&null!=t){return e(h.call(this)).each(function(){var n=e(this);if(n.data(i)){var o=n.data(i),s=o.opt,r={trigger:"external",scrollInertia:s.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},l=e.extend(!0,{},r,a),c=N.call(this,t),d=l.scrollInertia>0&&l.scrollInertia<17?17:l.scrollInertia;c[0]=U.call(this,c[0],"y"),c[1]=U.call(this,c[1],"x"),l.moveDragger&&(c[0]*=o.scrollRatio.y,c[1]*=o.scrollRatio.x),l.dur=ne()?0:d,setTimeout(function(){null!==c[0]&&void 0!==c[0]&&"x"!==s.axis&&o.overflowed[0]&&(l.dir="y",l.overwrite="all",G(n,c[0].toString(),l)),null!==c[1]&&void 0!==c[1]&&"y"!==s.axis&&o.overflowed[1]&&(l.dir="x",l.overwrite="none",G(n,c[1].toString(),l))},l.timeout)}})}},stop:function(){return e(h.call(this)).each(function(){var t=e(this);t.data(i)&&X(t)})},disable:function(t){return e(h.call(this)).each(function(){var a=e(this);a.data(i)&&(a.data(i),V.call(this,"remove"),T.call(this),t&&$.call(this),B.call(this,!0),a.addClass(d[3]))})},destroy:function(){var t=h.call(this);return e(t).each(function(){var n=e(this);if(n.data(i)){var o=n.data(i),s=o.opt,r=e("#mCSB_"+o.idx),l=e("#mCSB_"+o.idx+"_container"),c=e(".mCSB_"+o.idx+"_scrollbar");s.live&&p(s.liveSelector||e(t).selector),V.call(this,"remove"),T.call(this),$.call(this),n.removeData(i),K(this,"mcs"),c.remove(),l.find("img."+d[2]).removeClass(d[2]),r.replaceWith(l.contents()),n.removeClass(a+" _"+i+"_"+o.idx+" "+d[6]+" "+d[7]+" "+d[5]+" "+d[3]).addClass(d[4])}})}},h=function(){return"object"!=typeof e(this)||e(this).length<1?n:this},m=function(t){var a=["rounded","rounded-dark","rounded-dots","rounded-dots-dark"],i=["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"],n=["minimal","minimal-dark"],o=["minimal","minimal-dark"],s=["minimal","minimal-dark"];t.autoDraggerLength=!(e.inArray(t.theme,a)>-1)&&t.autoDraggerLength,t.autoExpandScrollbar=!(e.inArray(t.theme,i)>-1)&&t.autoExpandScrollbar,t.scrollButtons.enable=!(e.inArray(t.theme,n)>-1)&&t.scrollButtons.enable,t.autoHideScrollbar=e.inArray(t.theme,o)>-1||t.autoHideScrollbar,t.scrollbarPosition=e.inArray(t.theme,s)>-1?"outside":t.scrollbarPosition},p=function(e){r[e]&&(clearTimeout(r[e]),K(r,e))},f=function(e){return"yx"===e||"xy"===e||"auto"===e?"yx":"x"===e||"horizontal"===e?"x":"y"},_=function(e){return"stepped"===e||"pixels"===e||"step"===e||"click"===e?"stepped":"stepless"},g=function(){var t=e(this),n=t.data(i),o=n.opt,s=o.autoExpandScrollbar?" "+d[1]+"_expand":"",r=["<div id='mCSB_"+n.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+n.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_vertical"+s+"'><div class='"+d[12]+"'><div id='mCSB_"+n.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+n.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+n.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_horizontal"+s+"'><div class='"+d[12]+"'><div id='mCSB_"+n.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],l="yx"===o.axis?"mCSB_vertical_horizontal":"x"===o.axis?"mCSB_horizontal":"mCSB_vertical",c="yx"===o.axis?r[0]+r[1]:"x"===o.axis?r[1]:r[0],u="yx"===o.axis?"<div id='mCSB_"+n.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",h=o.autoHideScrollbar?" "+d[6]:"",m="x"!==o.axis&&"rtl"===n.langDir?" "+d[7]:"";o.setWidth&&t.css("width",o.setWidth),o.setHeight&&t.css("height",o.setHeight),o.setLeft="y"!==o.axis&&"rtl"===n.langDir?"989999px":o.setLeft,t.addClass(a+" _"+i+"_"+n.idx+h+m).wrapInner("<div id='mCSB_"+n.idx+"' class='mCustomScrollBox mCS-"+o.theme+" "+l+"'><div id='mCSB_"+n.idx+"_container' class='mCSB_container' style='position:relative; top:"+o.setTop+"; left:"+o.setLeft+";' dir='"+n.langDir+"' /></div>");var p=e("#mCSB_"+n.idx),f=e("#mCSB_"+n.idx+"_container");"y"===o.axis||o.advanced.autoExpandHorizontalScroll||f.css("width",v(f)),"outside"===o.scrollbarPosition?("static"===t.css("position")&&t.css("position","relative"),t.css("overflow","visible"),p.addClass("mCSB_outside").after(c)):(p.addClass("mCSB_inside").append(c),f.wrap(u)),w.call(this);var _=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")];_[0].css("min-height",_[0].height()),_[1].css("min-width",_[1].width())},v=function(t){var a=[t[0].scrollWidth,Math.max.apply(Math,t.children().map(function(){return e(this).outerWidth(!0)}).get())],i=t.parent().width();return a[0]>i?a[0]:a[1]>i?a[1]:"100%"},b=function(){var t=e(this),a=t.data(i),n=a.opt,o=e("#mCSB_"+a.idx+"_container");if(n.advanced.autoExpandHorizontalScroll&&"y"!==n.axis){o.css({width:"auto","min-width":0,"overflow-x":"scroll"});var s=Math.ceil(o[0].scrollWidth);3===n.advanced.autoExpandHorizontalScroll||2!==n.advanced.autoExpandHorizontalScroll&&s>o.parent().width()?o.css({width:s,"min-width":"100%","overflow-x":"inherit"}):o.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(o[0].getBoundingClientRect().right+.4)-Math.floor(o[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap()}},w=function(){var t=e(this),a=t.data(i),n=a.opt,o=e(".mCSB_"+a.idx+"_scrollbar:first"),s=ae(n.scrollButtons.tabindex)?"tabindex='"+n.scrollButtons.tabindex+"'":"",r=["<a href='#' class='"+d[13]+"' "+s+" />","<a href='#' class='"+d[14]+"' "+s+" />","<a href='#' class='"+d[15]+"' "+s+" />","<a href='#' class='"+d[16]+"' "+s+" />"],l=["x"===n.axis?r[2]:r[0],"x"===n.axis?r[3]:r[1],r[2],r[3]];n.scrollButtons.enable&&o.prepend(l[0]).append(l[1]).next(".mCSB_scrollTools").prepend(l[2]).append(l[3])},x=function(){var t=e(this),a=t.data(i),n=e("#mCSB_"+a.idx),o=e("#mCSB_"+a.idx+"_container"),s=[e("#mCSB_"+a.idx+"_dragger_vertical"),e("#mCSB_"+a.idx+"_dragger_horizontal")],r=[n.height()/o.outerHeight(!1),n.width()/o.outerWidth(!1)],c=[parseInt(s[0].css("min-height")),Math.round(r[0]*s[0].parent().height()),parseInt(s[1].css("min-width")),Math.round(r[1]*s[1].parent().width())],d=l&&c[1]<c[0]?c[0]:c[1],u=l&&c[3]<c[2]?c[2]:c[3];s[0].css({height:d,"max-height":s[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":c[0]+"px"}),s[1].css({width:u,"max-width":s[1].parent().width()-10})},y=function(){var t=e(this),a=t.data(i),n=e("#mCSB_"+a.idx),o=e("#mCSB_"+a.idx+"_container"),s=[e("#mCSB_"+a.idx+"_dragger_vertical"),e("#mCSB_"+a.idx+"_dragger_horizontal")],r=[o.outerHeight(!1)-n.height(),o.outerWidth(!1)-n.width()],l=[r[0]/(s[0].parent().height()-s[0].height()),r[1]/(s[1].parent().width()-s[1].width())];a.scrollRatio={y:l[0],x:l[1]}},C=function(e,t,a){var i=a?d[0]+"_expanded":"",n=e.closest(".mCSB_scrollTools");"active"===t?(e.toggleClass(d[0]+" "+i),n.toggleClass(d[1]),e[0]._draggable=e[0]._draggable?0:1):e[0]._draggable||("hide"===t?(e.removeClass(d[0]),n.removeClass(d[1])):(e.addClass(d[0]),n.addClass(d[1])))},S=function(){var t=e(this),a=t.data(i),n=e("#mCSB_"+a.idx),o=e("#mCSB_"+a.idx+"_container"),s=null==a.overflowed?o.height():o.outerHeight(!1),r=null==a.overflowed?o.width():o.outerWidth(!1),l=o[0].scrollHeight,c=o[0].scrollWidth;return l>s&&(s=l),c>r&&(r=c),[s>n.height(),r>n.width()]},$=function(){var t=e(this),a=t.data(i),n=a.opt,o=e("#mCSB_"+a.idx),s=e("#mCSB_"+a.idx+"_container"),r=[e("#mCSB_"+a.idx+"_dragger_vertical"),e("#mCSB_"+a.idx+"_dragger_horizontal")];if(X(t),("x"!==n.axis&&!a.overflowed[0]||"y"===n.axis&&a.overflowed[0])&&(r[0].add(s).css("top",0),G(t,"_resetY")),"y"!==n.axis&&!a.overflowed[1]||"x"===n.axis&&a.overflowed[1]){var l=dx=0;"rtl"===a.langDir&&(l=o.width()-s.outerWidth(!1),dx=Math.abs(l/a.scrollRatio.x)),s.css("left",l),r[1].css("left",dx),G(t,"_resetX")}},k=function(){function t(){s=setTimeout(function(){e.event.special.mousewheel?(clearTimeout(s),I.call(a[0])):t()},100)}var a=e(this),n=a.data(i),o=n.opt;if(!n.bindEvents){if(E.call(this),o.contentTouchScroll&&L.call(this),R.call(this),o.mouseWheel.enable){var s;t()}q.call(this),H.call(this),o.advanced.autoScrollOnFocus&&z.call(this),o.scrollButtons.enable&&F.call(this),o.keyboard.enable&&W.call(this),n.bindEvents=!0}},T=function(){var t=e(this),a=t.data(i),n=a.opt,o=i+"_"+a.idx,s=".mCSB_"+a.idx+"_scrollbar",r=e("#mCSB_"+a.idx+",#mCSB_"+a.idx+"_container,#mCSB_"+a.idx+"_container_wrapper,"+s+" ."+d[12]+",#mCSB_"+a.idx+"_dragger_vertical,#mCSB_"+a.idx+"_dragger_horizontal,"+s+">a"),l=e("#mCSB_"+a.idx+"_container");n.advanced.releaseDraggableSelectors&&r.add(e(n.advanced.releaseDraggableSelectors)),n.advanced.extraDraggableSelectors&&r.add(e(n.advanced.extraDraggableSelectors)),a.bindEvents&&(e(document).add(e(!A()||top.document)).unbind("."+o),r.each(function(){e(this).unbind("."+o)}),clearTimeout(t[0]._focusTimeout),K(t[0],"_focusTimeout"),clearTimeout(a.sequential.step),K(a.sequential,"step"),clearTimeout(l[0].onCompleteTimeout),K(l[0],"onCompleteTimeout"),a.bindEvents=!1)},B=function(t){var a=e(this),n=a.data(i),o=n.opt,s=e("#mCSB_"+n.idx+"_container_wrapper"),r=s.length?s:e("#mCSB_"+n.idx+"_container"),l=[e("#mCSB_"+n.idx+"_scrollbar_vertical"),e("#mCSB_"+n.idx+"_scrollbar_horizontal")],c=[l[0].find(".mCSB_dragger"),l[1].find(".mCSB_dragger")];"x"!==o.axis&&(n.overflowed[0]&&!t?(l[0].add(c[0]).add(l[0].children("a")).css("display","block"),r.removeClass(d[8]+" "+d[10])):(o.alwaysShowScrollbar?(2!==o.alwaysShowScrollbar&&c[0].css("display","none"),r.removeClass(d[10])):(l[0].css("display","none"),r.addClass(d[10])),r.addClass(d[8]))),"y"!==o.axis&&(n.overflowed[1]&&!t?(l[1].add(c[1]).add(l[1].children("a")).css("display","block"),r.removeClass(d[9]+" "+d[11])):(o.alwaysShowScrollbar?(2!==o.alwaysShowScrollbar&&c[1].css("display","none"),r.removeClass(d[11])):(l[1].css("display","none"),r.addClass(d[11])),r.addClass(d[9]))),n.overflowed[0]||n.overflowed[1]?a.removeClass(d[5]):a.addClass(d[5])},M=function(t){var a=t.type,i=t.target.ownerDocument!==document&&null!==frameElement?[e(frameElement).offset().top,e(frameElement).offset().left]:null,n=A()&&t.target.ownerDocument!==top.document&&null!==frameElement?[e(t.view.frameElement).offset().top,e(t.view.frameElement).offset().left]:[0,0];switch(a){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return i?[t.originalEvent.pageY-i[0]+n[0],t.originalEvent.pageX-i[1]+n[1],!1]:[t.originalEvent.pageY,t.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var o=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],s=t.originalEvent.touches.length||t.originalEvent.changedTouches.length;return t.target.ownerDocument!==document?[o.screenY,o.screenX,s>1]:[o.pageY,o.pageX,s>1];default:return i?[t.pageY-i[0]+n[0],t.pageX-i[1]+n[1],!1]:[t.pageY,t.pageX,!1]}},E=function(){function t(e,t,i,n){if(m[0].idleTimer=d.scrollInertia<233?250:0,a.attr("id")===h[1])var o="x",l=(a[0].offsetLeft-t+n)*r.scrollRatio.x;else var o="y",l=(a[0].offsetTop-e+i)*r.scrollRatio.y;G(s,l.toString(),{dir:o,drag:!0})}
var a,n,o,s=e(this),r=s.data(i),d=r.opt,u=i+"_"+r.idx,h=["mCSB_"+r.idx+"_dragger_vertical","mCSB_"+r.idx+"_dragger_horizontal"],m=e("#mCSB_"+r.idx+"_container"),p=e("#"+h[0]+",#"+h[1]),f=d.advanced.releaseDraggableSelectors?p.add(e(d.advanced.releaseDraggableSelectors)):p,_=d.advanced.extraDraggableSelectors?e(!A()||top.document).add(e(d.advanced.extraDraggableSelectors)):e(!A()||top.document);p.bind("contextmenu."+u,function(e){e.preventDefault()}).bind("mousedown."+u+" touchstart."+u+" pointerdown."+u+" MSPointerDown."+u,function(t){if(t.stopImmediatePropagation(),t.preventDefault(),ee(t)){c=!0,l&&(document.onselectstart=function(){return!1}),O.call(m,!1),X(s),a=e(this);var i=a.offset(),r=M(t)[0]-i.top,u=M(t)[1]-i.left,h=a.height()+i.top,p=a.width()+i.left;h>r&&r>0&&p>u&&u>0&&(n=r,o=u),C(a,"active",d.autoExpandScrollbar)}}).bind("touchmove."+u,function(e){e.stopImmediatePropagation(),e.preventDefault();var i=a.offset();t(n,o,M(e)[0]-i.top,M(e)[1]-i.left)}),e(document).add(_).bind("mousemove."+u+" pointermove."+u+" MSPointerMove."+u,function(e){if(a){var i=a.offset(),s=M(e)[0]-i.top,r=M(e)[1]-i.left;if(n===s&&o===r)return;t(n,o,s,r)}}).add(f).bind("mouseup."+u+" touchend."+u+" pointerup."+u+" MSPointerUp."+u,function(){a&&(C(a,"active",d.autoExpandScrollbar),a=null),c=!1,l&&(document.onselectstart=null),O.call(m,!0)})},L=function(){function a(e){if(!te(e)||c||M(e)[2])return void(t=0);t=1,y=0,C=0,d=1,S.removeClass("mCS_touch_action");var a=E.offset();u=M(e)[0]-a.top,h=M(e)[1]-a.left,O=[M(e)[0],M(e)[1]]}function n(e){if(te(e)&&!c&&!M(e)[2]&&(k.documentTouchScroll||e.preventDefault(),e.stopImmediatePropagation(),(!C||y)&&d)){_=Z();var t=B.offset(),a=M(e)[0]-t.top,i=M(e)[1]-t.left,n="mcsLinearOut";if(R.push(a),I.push(i),O[2]=Math.abs(M(e)[0]-O[0]),O[3]=Math.abs(M(e)[1]-O[1]),$.overflowed[0])var o=L[0].parent().height()-L[0].height(),s=u-a>0&&a-u>-(o*$.scrollRatio.y)&&(2*O[3]<O[2]||"yx"===k.axis);if($.overflowed[1])var r=L[1].parent().width()-L[1].width(),m=h-i>0&&i-h>-(r*$.scrollRatio.x)&&(2*O[2]<O[3]||"yx"===k.axis);s||m?(z||e.preventDefault(),y=1):(C=1,S.addClass("mCS_touch_action")),z&&e.preventDefault(),w="yx"===k.axis?[u-a,h-i]:"x"===k.axis?[null,h-i]:[u-a,null],E[0].idleTimer=250,$.overflowed[0]&&l(w[0],0,n,"y","all",!0),$.overflowed[1]&&l(w[1],0,n,"x",D,!0)}}function o(e){if(!te(e)||c||M(e)[2])return void(t=0);t=1,e.stopImmediatePropagation(),X(S),f=Z();var a=B.offset();m=M(e)[0]-a.top,p=M(e)[1]-a.left,R=[],I=[]}function s(e){if(te(e)&&!c&&!M(e)[2]){d=0,e.stopImmediatePropagation(),y=0,C=0,g=Z();var t=B.offset(),a=M(e)[0]-t.top,i=M(e)[1]-t.left;if(!(g-_>30)){b=1e3/(g-f);var n="mcsEaseOut",o=2.5>b,s=o?[R[R.length-2],I[I.length-2]]:[0,0];v=o?[a-s[0],i-s[1]]:[a-m,i-p];var u=[Math.abs(v[0]),Math.abs(v[1])];b=o?[Math.abs(v[0]/4),Math.abs(v[1]/4)]:[b,b];var h=[Math.abs(E[0].offsetTop)-v[0]*r(u[0]/b[0],b[0]),Math.abs(E[0].offsetLeft)-v[1]*r(u[1]/b[1],b[1])];w="yx"===k.axis?[h[0],h[1]]:"x"===k.axis?[null,h[1]]:[h[0],null],x=[4*u[0]+k.scrollInertia,4*u[1]+k.scrollInertia];var S=parseInt(k.contentTouchScroll)||0;w[0]=u[0]>S?w[0]:0,w[1]=u[1]>S?w[1]:0,$.overflowed[0]&&l(w[0],x[0],n,"y",D,!1),$.overflowed[1]&&l(w[1],x[1],n,"x",D,!1)}}}function r(e,t){var a=[1.5*t,2*t,t/1.5,t/2];return e>90?t>4?a[0]:a[3]:e>60?t>3?a[3]:a[2]:e>30?t>8?a[1]:t>6?a[0]:t>4?t:a[2]:t>8?t:a[3]}function l(e,t,a,i,n,o){e&&G(S,e.toString(),{dur:t,scrollEasing:a,dir:i,overwrite:n,drag:o})}var d,u,h,m,p,f,_,g,v,b,w,x,y,C,S=e(this),$=S.data(i),k=$.opt,T=i+"_"+$.idx,B=e("#mCSB_"+$.idx),E=e("#mCSB_"+$.idx+"_container"),L=[e("#mCSB_"+$.idx+"_dragger_vertical"),e("#mCSB_"+$.idx+"_dragger_horizontal")],R=[],I=[],D="yx"===k.axis?"none":"all",O=[],P=E.find("iframe"),q=["touchstart."+T+" pointerdown."+T+" MSPointerDown."+T,"touchmove."+T+" pointermove."+T+" MSPointerMove."+T,"touchend."+T+" pointerup."+T+" MSPointerUp."+T],z=void 0!==document.body.style.touchAction&&""!==document.body.style.touchAction;E.bind(q[0],function(e){a(e)}).bind(q[1],function(e){n(e)}),B.bind(q[0],function(e){o(e)}).bind(q[2],function(e){s(e)}),P.length&&P.each(function(){e(this).bind("load",function(){A(this)&&e(this.contentDocument||this.contentWindow.document).bind(q[0],function(e){a(e),o(e)}).bind(q[1],function(e){n(e)}).bind(q[2],function(e){s(e)})})})},R=function(){function a(){return window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type?document.selection.createRange().text:0}function n(e,t,a){d.type=a&&o?"stepped":"stepless",d.scrollAmount=10,j(s,e,t,"mcsLinearOut",a?60:null)}var o,s=e(this),r=s.data(i),l=r.opt,d=r.sequential,u=i+"_"+r.idx,h=e("#mCSB_"+r.idx+"_container"),m=h.parent();h.bind("mousedown."+u,function(){t||o||(o=1,c=!0)}).add(document).bind("mousemove."+u,function(e){if(!t&&o&&a()){var i=h.offset(),s=M(e)[0]-i.top+h[0].offsetTop,c=M(e)[1]-i.left+h[0].offsetLeft;s>0&&s<m.height()&&c>0&&c<m.width()?d.step&&n("off",null,"stepped"):("x"!==l.axis&&r.overflowed[0]&&(0>s?n("on",38):s>m.height()&&n("on",40)),"y"!==l.axis&&r.overflowed[1]&&(0>c?n("on",37):c>m.width()&&n("on",39)))}}).bind("mouseup."+u+" dragend."+u,function(){t||(o&&(o=0,n("off",null)),c=!1)})},I=function(){function t(t,i){if(X(a),!P(a,t.target)){var s="auto"!==o.mouseWheel.deltaFactor?parseInt(o.mouseWheel.deltaFactor):l&&t.deltaFactor<100?100:t.deltaFactor||100,d=o.scrollInertia;if("x"===o.axis||"x"===o.mouseWheel.axis)var u="x",h=[Math.round(s*n.scrollRatio.x),parseInt(o.mouseWheel.scrollAmount)],m="auto"!==o.mouseWheel.scrollAmount?h[1]:h[0]>=r.width()?.9*r.width():h[0],p=Math.abs(e("#mCSB_"+n.idx+"_container")[0].offsetLeft),f=c[1][0].offsetLeft,_=c[1].parent().width()-c[1].width(),g="y"===o.mouseWheel.axis?t.deltaY||i:t.deltaX;else var u="y",h=[Math.round(s*n.scrollRatio.y),parseInt(o.mouseWheel.scrollAmount)],m="auto"!==o.mouseWheel.scrollAmount?h[1]:h[0]>=r.height()?.9*r.height():h[0],p=Math.abs(e("#mCSB_"+n.idx+"_container")[0].offsetTop),f=c[0][0].offsetTop,_=c[0].parent().height()-c[0].height(),g=t.deltaY||i;"y"===u&&!n.overflowed[0]||"x"===u&&!n.overflowed[1]||((o.mouseWheel.invert||t.webkitDirectionInvertedFromDevice)&&(g=-g),o.mouseWheel.normalizeDelta&&(g=0>g?-1:1),(g>0&&0!==f||0>g&&f!==_||o.mouseWheel.preventDefault)&&(t.stopImmediatePropagation(),t.preventDefault()),t.deltaFactor<5&&!o.mouseWheel.normalizeDelta&&(m=t.deltaFactor,d=17),G(a,(p-g*m).toString(),{dir:u,dur:d}))}}if(e(this).data(i)){var a=e(this),n=a.data(i),o=n.opt,s=i+"_"+n.idx,r=e("#mCSB_"+n.idx),c=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")],d=e("#mCSB_"+n.idx+"_container").find("iframe");d.length&&d.each(function(){e(this).bind("load",function(){A(this)&&e(this.contentDocument||this.contentWindow.document).bind("mousewheel."+s,function(e,a){t(e,a)})})}),r.bind("mousewheel."+s,function(e,a){t(e,a)})}},D=new Object,A=function(t){var a=!1,i=!1,n=null;if(void 0===t?i="#empty":void 0!==e(t).attr("id")&&(i=e(t).attr("id")),i!==!1&&void 0!==D[i])return D[i];if(t){try{var o=t.contentDocument||t.contentWindow.document;n=o.body.innerHTML}catch(e){}a=null!==n}else{try{var o=top.document;n=o.body.innerHTML}catch(e){}a=null!==n}return i!==!1&&(D[i]=a),a},O=function(e){var t=this.find("iframe");if(t.length){var a=e?"auto":"none";t.css("pointer-events",a)}},P=function(t,a){var n=a.nodeName.toLowerCase(),o=t.data(i).opt.mouseWheel.disableOver,s=["select","textarea"];return e.inArray(n,o)>-1&&!(e.inArray(n,s)>-1&&!e(a).is(":focus"))},q=function(){var t,a=e(this),n=a.data(i),o=i+"_"+n.idx,s=e("#mCSB_"+n.idx+"_container"),r=s.parent();e(".mCSB_"+n.idx+"_scrollbar ."+d[12]).bind("mousedown."+o+" touchstart."+o+" pointerdown."+o+" MSPointerDown."+o,function(a){c=!0,e(a.target).hasClass("mCSB_dragger")||(t=1)}).bind("touchend."+o+" pointerup."+o+" MSPointerUp."+o,function(){c=!1}).bind("click."+o,function(i){if(t&&(t=0,e(i.target).hasClass(d[12])||e(i.target).hasClass("mCSB_draggerRail"))){X(a);var o=e(this),l=o.find(".mCSB_dragger");if(o.parent(".mCSB_scrollTools_horizontal").length>0){if(!n.overflowed[1])return;var c="x",u=i.pageX>l.offset().left?-1:1,h=Math.abs(s[0].offsetLeft)-u*(.9*r.width())}else{if(!n.overflowed[0])return;var c="y",u=i.pageY>l.offset().top?-1:1,h=Math.abs(s[0].offsetTop)-u*(.9*r.height())}G(a,h.toString(),{dir:c,scrollEasing:"mcsEaseInOut"})}})},z=function(){var t=e(this),a=t.data(i),n=a.opt,o=i+"_"+a.idx,s=e("#mCSB_"+a.idx+"_container"),r=s.parent();s.bind("focusin."+o,function(){var a=e(document.activeElement),i=s.find(".mCustomScrollBox").length;a.is(n.advanced.autoScrollOnFocus)&&(X(t),clearTimeout(t[0]._focusTimeout),t[0]._focusTimer=i?17*i:0,t[0]._focusTimeout=setTimeout(function(){var e=[ie(a)[0],ie(a)[1]],i=[s[0].offsetTop,s[0].offsetLeft],o=[i[0]+e[0]>=0&&i[0]+e[0]<r.height()-a.outerHeight(!1),i[1]+e[1]>=0&&i[0]+e[1]<r.width()-a.outerWidth(!1)],l="yx"!==n.axis||o[0]||o[1]?"all":"none";"x"===n.axis||o[0]||G(t,e[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:l,dur:0}),"y"===n.axis||o[1]||G(t,e[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:l,dur:0})},t[0]._focusTimer))})},H=function(){var t=e(this),a=t.data(i),n=i+"_"+a.idx,o=e("#mCSB_"+a.idx+"_container").parent();o.bind("scroll."+n,function(){0===o.scrollTop()&&0===o.scrollLeft()||e(".mCSB_"+a.idx+"_scrollbar").css("visibility","hidden")})},F=function(){var t=e(this),a=t.data(i),n=a.opt,o=a.sequential,s=i+"_"+a.idx;e(".mCSB_"+a.idx+"_scrollbar>a").bind("contextmenu."+s,function(e){e.preventDefault()}).bind("mousedown."+s+" touchstart."+s+" pointerdown."+s+" MSPointerDown."+s+" mouseup."+s+" touchend."+s+" pointerup."+s+" MSPointerUp."+s+" mouseout."+s+" pointerout."+s+" MSPointerOut."+s+" click."+s,function(i){function s(e,a){o.scrollAmount=n.scrollButtons.scrollAmount,j(t,e,a)}if(i.preventDefault(),ee(i)){var r=e(this).attr("class");switch(o.type=n.scrollButtons.scrollType,i.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===o.type)return;c=!0,a.tweenRunning=!1,s("on",r);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===o.type)return;c=!1,o.dir&&s("off",r);break;case"click":if("stepped"!==o.type||a.tweenRunning)return;s("on",r)}}})},W=function(){function t(t){function i(e,t){s.type=o.keyboard.scrollType,s.scrollAmount=o.keyboard.scrollAmount,"stepped"===s.type&&n.tweenRunning||j(a,e,t)}switch(t.type){case"blur":n.tweenRunning&&s.dir&&i("off",null);break;case"keydown":case"keyup":var r=t.keyCode?t.keyCode:t.which,l="on";if("x"!==o.axis&&(38===r||40===r)||"y"!==o.axis&&(37===r||39===r)){if((38===r||40===r)&&!n.overflowed[0]||(37===r||39===r)&&!n.overflowed[1])return;"keyup"===t.type&&(l="off"),e(document.activeElement).is(u)||(t.preventDefault(),t.stopImmediatePropagation(),i(l,r))}else if(33===r||34===r){if((n.overflowed[0]||n.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type){X(a);var h=34===r?-1:1;if("x"===o.axis||"yx"===o.axis&&n.overflowed[1]&&!n.overflowed[0])var m="x",p=Math.abs(c[0].offsetLeft)-h*(.9*d.width());else var m="y",p=Math.abs(c[0].offsetTop)-h*(.9*d.height());G(a,p.toString(),{dir:m,scrollEasing:"mcsEaseInOut"})}}else if((35===r||36===r)&&!e(document.activeElement).is(u)&&((n.overflowed[0]||n.overflowed[1])&&(t.preventDefault(),t.stopImmediatePropagation()),"keyup"===t.type)){if("x"===o.axis||"yx"===o.axis&&n.overflowed[1]&&!n.overflowed[0])var m="x",p=35===r?Math.abs(d.width()-c.outerWidth(!1)):0;else var m="y",p=35===r?Math.abs(d.height()-c.outerHeight(!1)):0;G(a,p.toString(),{dir:m,scrollEasing:"mcsEaseInOut"})}}}var a=e(this),n=a.data(i),o=n.opt,s=n.sequential,r=i+"_"+n.idx,l=e("#mCSB_"+n.idx),c=e("#mCSB_"+n.idx+"_container"),d=c.parent(),u="input,textarea,select,datalist,keygen,[contenteditable='true']",h=c.find("iframe"),m=["blur."+r+" keydown."+r+" keyup."+r];h.length&&h.each(function(){e(this).bind("load",function(){A(this)&&e(this.contentDocument||this.contentWindow.document).bind(m[0],function(e){t(e)})})}),l.attr("tabindex","0").bind(m[0],function(e){t(e)})},j=function(t,a,n,o,s){function r(e){u.snapAmount&&(h.scrollAmount=u.snapAmount instanceof Array?"x"===h.dir[0]?u.snapAmount[1]:u.snapAmount[0]:u.snapAmount);var a="stepped"!==h.type,i=s?s:e?a?f/1.5:_:1e3/60,n=e?a?7.5:40:2.5,l=[Math.abs(m[0].offsetTop),Math.abs(m[0].offsetLeft)],d=[c.scrollRatio.y>10?10:c.scrollRatio.y,c.scrollRatio.x>10?10:c.scrollRatio.x],p="x"===h.dir[0]?l[1]+h.dir[1]*(d[1]*n):l[0]+h.dir[1]*(d[0]*n),g="x"===h.dir[0]?l[1]+h.dir[1]*parseInt(h.scrollAmount):l[0]+h.dir[1]*parseInt(h.scrollAmount),v="auto"!==h.scrollAmount?g:p,b=o?o:e?a?"mcsLinearOut":"mcsEaseInOut":"mcsLinear",w=!!e;return e&&17>i&&(v="x"===h.dir[0]?l[1]:l[0]),G(t,v.toString(),{dir:h.dir[0],scrollEasing:b,dur:i,onComplete:w}),e?void(h.dir=!1):(clearTimeout(h.step),void(h.step=setTimeout(function(){r()},i)))}function l(){clearTimeout(h.step),K(h,"step"),X(t)}var c=t.data(i),u=c.opt,h=c.sequential,m=e("#mCSB_"+c.idx+"_container"),p="stepped"===h.type,f=u.scrollInertia<26?26:u.scrollInertia,_=u.scrollInertia<1?17:u.scrollInertia;switch(a){case"on":if(h.dir=[n===d[16]||n===d[15]||39===n||37===n?"x":"y",n===d[13]||n===d[15]||38===n||37===n?-1:1],X(t),ae(n)&&"stepped"===h.type)return;r(p);break;case"off":l(),(p||c.tweenRunning&&h.dir)&&r(!0)}},N=function(t){var a=e(this).data(i).opt,n=[];return"function"==typeof t&&(t=t()),t instanceof Array?n=t.length>1?[t[0],t[1]]:"x"===a.axis?[null,t[0]]:[t[0],null]:(n[0]=t.y?t.y:t.x||"x"===a.axis?null:t,n[1]=t.x?t.x:t.y||"y"===a.axis?null:t),"function"==typeof n[0]&&(n[0]=n[0]()),"function"==typeof n[1]&&(n[1]=n[1]()),n},U=function(t,a){if(null!=t&&void 0!==t){var n=e(this),o=n.data(i),s=o.opt,r=e("#mCSB_"+o.idx+"_container"),l=r.parent(),c=typeof t;a||(a="x"===s.axis?"x":"y");var d="x"===a?r.outerWidth(!1)-l.width():r.outerHeight(!1)-l.height(),h="x"===a?r[0].offsetLeft:r[0].offsetTop,m="x"===a?"left":"top";switch(c){case"function":return t();case"object":var p=t.jquery?t:e(t);if(!p.length)return;return"x"===a?ie(p)[1]:ie(p)[0];case"string":case"number":if(ae(t))return Math.abs(t);if(-1!==t.indexOf("%"))return Math.abs(d*parseInt(t)/100);if(-1!==t.indexOf("-="))return Math.abs(h-parseInt(t.split("-=")[1]));if(-1!==t.indexOf("+=")){var f=h+parseInt(t.split("+=")[1]);return f>=0?0:Math.abs(f)}if(-1!==t.indexOf("px")&&ae(t.split("px")[0]))return Math.abs(t.split("px")[0]);if("top"===t||"left"===t)return 0;if("bottom"===t)return Math.abs(l.height()-r.outerHeight(!1));if("right"===t)return Math.abs(l.width()-r.outerWidth(!1));if("first"===t||"last"===t){var p=r.find(":"+t);return"x"===a?ie(p)[1]:ie(p)[0]}return e(t).length?"x"===a?ie(e(t))[1]:ie(e(t))[0]:(r.css(m,t),void u.update.call(null,n[0]))}}},V=function(t){function a(){return clearTimeout(h[0].autoUpdate),0===r.parents("html").length?void(r=null):void(h[0].autoUpdate=setTimeout(function(){return c.advanced.updateOnSelectorChange&&(l.poll.change.n=o(),l.poll.change.n!==l.poll.change.o)?(l.poll.change.o=l.poll.change.n,void s(3)):c.advanced.updateOnContentResize&&(l.poll.size.n=r[0].scrollHeight+r[0].scrollWidth+h[0].offsetHeight+r[0].offsetHeight+r[0].offsetWidth,l.poll.size.n!==l.poll.size.o)?(l.poll.size.o=l.poll.size.n,void s(1)):!c.advanced.updateOnImageLoad||"auto"===c.advanced.updateOnImageLoad&&"y"===c.axis||(l.poll.img.n=h.find("img").length,l.poll.img.n===l.poll.img.o)?void((c.advanced.updateOnSelectorChange||c.advanced.updateOnContentResize||c.advanced.updateOnImageLoad)&&a()):(l.poll.img.o=l.poll.img.n,void h.find("img").each(function(){n(this)}))},c.advanced.autoUpdateTimeout))}function n(t){function a(e,t){return function(){return t.apply(e,arguments)}}function i(){this.onload=null,e(t).addClass(d[2]),s(2)}if(e(t).hasClass(d[2]))return void s();var n=new Image;n.onload=a(n,i),n.src=t.src}function o(){c.advanced.updateOnSelectorChange===!0&&(c.advanced.updateOnSelectorChange="*");var e=0,t=h.find(c.advanced.updateOnSelectorChange);return c.advanced.updateOnSelectorChange&&t.length>0&&t.each(function(){e+=this.offsetHeight+this.offsetWidth}),e}function s(e){clearTimeout(h[0].autoUpdate),u.update.call(null,r[0],e)}var r=e(this),l=r.data(i),c=l.opt,h=e("#mCSB_"+l.idx+"_container");return t?(clearTimeout(h[0].autoUpdate),void K(h[0],"autoUpdate")):void a()},Y=function(e,t,a){return Math.round(e/t)*t-a},X=function(t){var a=t.data(i);e("#mCSB_"+a.idx+"_container,#mCSB_"+a.idx+"_container_wrapper,#mCSB_"+a.idx+"_dragger_vertical,#mCSB_"+a.idx+"_dragger_horizontal").each(function(){J.call(this)})},G=function(t,a,n){function o(e){return l&&c.callbacks[e]&&"function"==typeof c.callbacks[e]}function s(){return[c.callbacks.alwaysTriggerOffsets||b>=w[0]+y,c.callbacks.alwaysTriggerOffsets||-S>=b]}function r(){var e=[m[0].offsetTop,m[0].offsetLeft],a=[g[0].offsetTop,g[0].offsetLeft],i=[m.outerHeight(!1),m.outerWidth(!1)],o=[h.height(),h.width()];t[0].mcs={content:m,top:e[0],left:e[1],draggerTop:a[0],draggerLeft:a[1],topPct:Math.round(100*Math.abs(e[0])/(Math.abs(i[0])-o[0])),leftPct:Math.round(100*Math.abs(e[1])/(Math.abs(i[1])-o[1])),direction:n.dir}}var l=t.data(i),c=l.opt,d={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:c.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},n=e.extend(d,n),u=[n.dur,n.drag?0:n.dur],h=e("#mCSB_"+l.idx),m=e("#mCSB_"+l.idx+"_container"),p=m.parent(),f=c.callbacks.onTotalScrollOffset?N.call(t,c.callbacks.onTotalScrollOffset):[0,0],_=c.callbacks.onTotalScrollBackOffset?N.call(t,c.callbacks.onTotalScrollBackOffset):[0,0];if(l.trigger=n.trigger,0===p.scrollTop()&&0===p.scrollLeft()||(e(".mCSB_"+l.idx+"_scrollbar").css("visibility","visible"),p.scrollTop(0).scrollLeft(0)),"_resetY"!==a||l.contentReset.y||(o("onOverflowYNone")&&c.callbacks.onOverflowYNone.call(t[0]),l.contentReset.y=1),"_resetX"!==a||l.contentReset.x||(o("onOverflowXNone")&&c.callbacks.onOverflowXNone.call(t[0]),l.contentReset.x=1),"_resetY"!==a&&"_resetX"!==a){if(!l.contentReset.y&&t[0].mcs||!l.overflowed[0]||(o("onOverflowY")&&c.callbacks.onOverflowY.call(t[0]),l.contentReset.x=null),!l.contentReset.x&&t[0].mcs||!l.overflowed[1]||(o("onOverflowX")&&c.callbacks.onOverflowX.call(t[0]),l.contentReset.x=null),c.snapAmount){a=Y(a,c.snapAmount instanceof Array?"x"===n.dir?c.snapAmount[1]:c.snapAmount[0]:c.snapAmount,c.snapOffset)}switch(n.dir){case"x":var g=e("#mCSB_"+l.idx+"_dragger_horizontal"),v="left",b=m[0].offsetLeft,w=[h.width()-m.outerWidth(!1),g.parent().width()-g.width()],x=[a,0===a?0:a/l.scrollRatio.x],y=f[1],S=_[1],$=y>0?y/l.scrollRatio.x:0,k=S>0?S/l.scrollRatio.x:0;break;case"y":var g=e("#mCSB_"+l.idx+"_dragger_vertical"),v="top",b=m[0].offsetTop,w=[h.height()-m.outerHeight(!1),g.parent().height()-g.height()],x=[a,0===a?0:a/l.scrollRatio.y],y=f[0],S=_[0],$=y>0?y/l.scrollRatio.y:0,k=S>0?S/l.scrollRatio.y:0}x[1]<0||0===x[0]&&0===x[1]?x=[0,0]:x[1]>=w[1]?x=[w[0],w[1]]:x[0]=-x[0],t[0].mcs||(r(),o("onInit")&&c.callbacks.onInit.call(t[0])),clearTimeout(m[0].onCompleteTimeout),Q(g[0],v,Math.round(x[1]),u[1],n.scrollEasing),!l.tweenRunning&&(0===b&&x[0]>=0||b===w[0]&&x[0]<=w[0])||Q(m[0],v,Math.round(x[0]),u[0],n.scrollEasing,n.overwrite,{onStart:function(){n.callbacks&&n.onStart&&!l.tweenRunning&&(o("onScrollStart")&&(r(),c.callbacks.onScrollStart.call(t[0])),l.tweenRunning=!0,C(g),l.cbOffsets=s())},onUpdate:function(){n.callbacks&&n.onUpdate&&o("whileScrolling")&&(r(),c.callbacks.whileScrolling.call(t[0]))},onComplete:function(){if(n.callbacks&&n.onComplete){"yx"===c.axis&&clearTimeout(m[0].onCompleteTimeout);var e=m[0].idleTimer||0;m[0].onCompleteTimeout=setTimeout(function(){o("onScroll")&&(r(),c.callbacks.onScroll.call(t[0])),o("onTotalScroll")&&x[1]>=w[1]-$&&l.cbOffsets[0]&&(r(),c.callbacks.onTotalScroll.call(t[0])),o("onTotalScrollBack")&&x[1]<=k&&l.cbOffsets[1]&&(r(),c.callbacks.onTotalScrollBack.call(t[0])),l.tweenRunning=!1,m[0].idleTimer=0,C(g,"hide")},e)}}})}},Q=function(e,t,a,i,n,o,s){function r(){x.stop||(v||p.call(),v=Z()-g,l(),v>=x.time&&(x.time=v>x.time?v+h-(v-x.time):v+h-1,x.time<v+1&&(x.time=v+1)),x.time<i?x.id=m(r):_.call())}function l(){i>0?(x.currVal=u(x.time,b,y,i,n),w[t]=Math.round(x.currVal)+"px"):w[t]=a+"px",f.call()}function c(){h=1e3/60,x.time=v+h,m=window.requestAnimationFrame?window.requestAnimationFrame:function(e){return l(),setTimeout(e,.01)},x.id=m(r)}function d(){null!=x.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(x.id):clearTimeout(x.id),x.id=null)}function u(e,t,a,i,n){switch(n){case"linear":case"mcsLinear":return a*e/i+t;case"mcsLinearOut":return e/=i,e--,a*Math.sqrt(1-e*e)+t;case"easeInOutSmooth":return e/=i/2,1>e?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t);case"easeInOutStrong":return e/=i/2,1>e?a/2*Math.pow(2,10*(e-1))+t:(e--,a/2*(-Math.pow(2,-10*e)+2)+t);case"easeInOut":case"mcsEaseInOut":return e/=i/2,1>e?a/2*e*e*e+t:(e-=2,a/2*(e*e*e+2)+t);case"easeOutSmooth":return e/=i,e--,-a*(e*e*e*e-1)+t;case"easeOutStrong":return a*(-Math.pow(2,-10*e/i)+1)+t;case"easeOut":case"mcsEaseOut":default:var o=(e/=i)*e,s=o*e;return t+a*(.499999999999997*s*o+-2.5*o*o+5.5*s+-6.5*o+4*e)}}e._mTween||(e._mTween={top:{},left:{}});var h,m,s=s||{},p=s.onStart||function(){},f=s.onUpdate||function(){},_=s.onComplete||function(){},g=Z(),v=0,b=e.offsetTop,w=e.style,x=e._mTween[t];"left"===t&&(b=e.offsetLeft);var y=a-b;x.stop=0,"none"!==o&&d(),c()},Z=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},J=function(){var e=this;e._mTween||(e._mTween={top:{},left:{}});for(var t=["top","left"],a=0;a<t.length;a++){var i=t[a];e._mTween[i].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(e._mTween[i].id):clearTimeout(e._mTween[i].id),e._mTween[i].id=null,e._mTween[i].stop=1)}},K=function(e,t){try{delete e[t]}catch(a){e[t]=null}},ee=function(e){return!(e.which&&1!==e.which)},te=function(e){var t=e.originalEvent.pointerType;return!(t&&"touch"!==t&&2!==t)},ae=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},ie=function(e){var t=e.parents(".mCSB_container");return[e.offset().top-t.offset().top,e.offset().left-t.offset().left]},ne=function(){function e(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}var t=e();return!!t&&document[t]};e.fn[a]=function(t){return u[t]?u[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):u.init.apply(this,arguments)},e[a]=function(t){return u[t]?u[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):u.init.apply(this,arguments)},e[a].defaults=o,window[a]=!0,e(window).bind("load",function(){e(n)[a](),e.extend(e.expr[":"],{mcsInView:e.expr[":"].mcsInView||function(t){var a,i,n=e(t),o=n.parents(".mCSB_container");if(o.length)return a=o.parent(),i=[o[0].offsetTop,o[0].offsetLeft],i[0]+ie(n)[0]>=0&&i[0]+ie(n)[0]<a.height()-n.outerHeight(!1)&&i[1]+ie(n)[1]>=0&&i[1]+ie(n)[1]<a.width()-n.outerWidth(!1)},mcsInSight:e.expr[":"].mcsInSight||function(t,a,i){var n,o,s,r,l=e(t),c=l.parents(".mCSB_container"),d="exact"===i[3]?[[1,0],[1,0]]:[[.9,.1],[.6,.4]];if(c.length)return n=[l.outerHeight(!1),l.outerWidth(!1)],s=[c[0].offsetTop+ie(l)[0],c[0].offsetLeft+ie(l)[1]],o=[c.parent()[0].offsetHeight,c.parent()[0].offsetWidth],r=[n[0]<o[0]?d[0]:d[1],n[1]<o[1]?d[0]:d[1]],s[0]-o[0]*r[0][0]<0&&s[0]+n[0]-o[0]*r[0][1]>=0&&s[1]-o[1]*r[1][0]<0&&s[1]+n[1]-o[1]*r[1][1]>=0},mcsOverflow:e.expr[":"].mcsOverflow||function(t){var a=e(t).data(i);if(a)return a.overflowed[0]||a.overflowed[1]}})})})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return void(t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var a=e.data(this[0],"validator");return a?a:(this.attr("novalidate","novalidate"),a=new e.validator(t,this[0]),e.data(this[0],"validator",a),a.settings.onsubmit&&(this.on("click.validate",":submit",function(t){a.settings.submitHandler&&(a.submitButton=t.target),e(this).hasClass("cancel")&&(a.cancelSubmit=!0),void 0!==e(this).attr("formnovalidate")&&(a.cancelSubmit=!0)}),this.on("submit.validate",function(t){function i(){var i,n;return!a.settings.submitHandler||(a.submitButton&&(i=e("<input type='hidden'/>").attr("name",a.submitButton.name).val(e(a.submitButton).val()).appendTo(a.currentForm)),n=a.settings.submitHandler.call(a,a.currentForm,t),a.submitButton&&i.remove(),void 0!==n&&n)}return a.settings.debug&&t.preventDefault(),a.cancelSubmit?(a.cancelSubmit=!1,i()):a.form()?a.pendingRequest?(a.formSubmitted=!0,!1):i():(a.focusInvalid(),!1)})),a)},valid:function(){var t,a,i;return e(this[0]).is("form")?t=this.validate().form():(i=[],t=!0,a=e(this[0].form).validate(),this.each(function(){t=a.element(this)&&t,t||(i=i.concat(a.errorList))}),a.errorList=i),t},rules:function(t,a){if(this.length){var i,n,o,s,r,l,c=this[0];if(t)switch(i=e.data(c.form,"validator").settings,n=i.rules,o=e.validator.staticRules(c),t){case"add":e.extend(o,e.validator.normalizeRule(a)),delete o.messages,n[c.name]=o,a.messages&&(i.messages[c.name]=e.extend(i.messages[c.name],a.messages));break;case"remove":return a?(l={},e.each(a.split(/\s/),function(t,a){l[a]=o[a],delete o[a],"required"===a&&e(c).removeAttr("aria-required")}),l):(delete n[c.name],o)}return s=e.validator.normalizeRules(e.extend({},e.validator.classRules(c),e.validator.attributeRules(c),e.validator.dataRules(c),e.validator.staticRules(c)),c),s.required&&(r=s.required,delete s.required,s=e.extend({required:r},s),e(c).attr("aria-required","true")),s.remote&&(r=s.remote,delete s.remote,s=e.extend(s,{remote:r})),s}}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){var a=e(t).val();return null!==a&&!!e.trim(""+a)},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,a){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=a,this.init()},e.validator.format=function(t,a){return 1===arguments.length?function(){var a=e.makeArray(arguments);return a.unshift(t),e.validator.format.apply(this,a)}:void 0===a?t:(arguments.length>2&&a.constructor!==Array&&(a=e.makeArray(arguments).slice(1)),a.constructor!==Array&&(a=[a]),e.each(a,function(e,a){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return a})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(t,a){var i=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===a.which&&""===this.elementValue(t)||-1!==e.inArray(a.keyCode,i)||(t.name in this.submitted||t.name in this.invalid)&&this.element(t)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,a,i){"radio"===t.type?this.findByName(t.name).addClass(a).removeClass(i):e(t).addClass(a).removeClass(i)},unhighlight:function(t,a,i){"radio"===t.type?this.findByName(t.name).removeClass(a).addClass(i):e(t).removeClass(a).addClass(i)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}."),step:e.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var a=e.data(this.form,"validator"),i="on"+t.type.replace(/^validate/,""),n=a.settings;n[i]&&!e(this).is(n.ignore)&&n[i].call(a,this,t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var a,i=this.groups={};e.each(this.settings.groups,function(t,a){"string"==typeof a&&(a=a.split(/\s/)),e.each(a,function(e,a){i[a]=t})}),a=this.settings.rules,e.each(a,function(t,i){a[t]=e.validator.normalizeRule(i)}),e(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable]",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t),this.settings.invalidHandler&&e(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),e(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){var a,i,n=this.clean(t),o=this.validationTargetFor(n),s=this,r=!0;return void 0===o?delete this.invalid[n.name]:(this.prepareElement(o),this.currentElements=e(o),i=this.groups[o.name],i&&e.each(this.groups,function(e,t){t===i&&e!==o.name&&(n=s.validationTargetFor(s.clean(s.findByName(e))),n&&n.name in s.invalid&&(s.currentElements.push(n),r=r&&s.check(n)))}),a=this.check(o)!==!1,r=r&&a,this.invalid[o.name]=!a,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),e(t).attr("aria-invalid",!a)),r},showErrors:function(t){if(t){var a=this;e.extend(this.errorMap,t),this.errorList=e.map(this.errorMap,function(e,t){return{message:e,element:a.findByName(t)[0]}}),this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var t=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(t)},resetElements:function(e){var t;if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,""),this.findByName(e[t].name).removeClass(this.settings.validClass);else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},
objectLength:function(e){var t,a=0;for(t in e)e[t]&&a++;return a},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,a={};return e(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var i=this.name||e(this).attr("name");return!i&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=e(this).closest("form")[0]),!(i in a||!t.objectLength(e(this).rules()))&&(a[i]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([])},reset:function(){this.resetInternals(),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var a,i,n=e(t),o=t.type;return"radio"===o||"checkbox"===o?this.findByName(t.name).filter(":checked").val():"number"===o&&void 0!==t.validity?t.validity.badInput?"NaN":n.val():(a=t.hasAttribute("contenteditable")?n.text():n.val(),"file"===o?"C:\\fakepath\\"===a.substr(0,12)?a.substr(12):(i=a.lastIndexOf("/"),i>=0?a.substr(i+1):(i=a.lastIndexOf("\\"),i>=0?a.substr(i+1):a)):"string"==typeof a?a.replace(/\r/g,""):a)},check:function(t){t=this.validationTargetFor(this.clean(t));var a,i,n,o=e(t).rules(),s=e.map(o,function(e,t){return t}).length,r=!1,l=this.elementValue(t);if("function"==typeof o.normalizer){if(l=o.normalizer.call(t,l),"string"!=typeof l)throw new TypeError("The normalizer should return a string value.");delete o.normalizer}for(i in o){n={method:i,parameters:o[i]};try{if(a=e.validator.methods[i].call(this,l,t,n.parameters),"dependency-mismatch"===a&&1===s){r=!0;continue}if(r=!1,"pending"===a)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!a)return this.formatAndAdd(t,n),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+n.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+n.method+"' method."),e}}if(!r)return this.objectLength(o)&&this.successList.push(t),!0},customDataMessage:function(t,a){return e(t).data("msg"+a.charAt(0).toUpperCase()+a.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(e,t){var a=this.settings.messages[e];return a&&(a.constructor===String?a:a[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,a){var i=this.findDefined(this.customMessage(t.name,a.method),this.customDataMessage(t,a.method),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[a.method],"<strong>Warning: No message defined for "+t.name+"</strong>"),n=/\$?\{(\d+)\}/g;return"function"==typeof i?i=i.call(this,a.parameters,t):n.test(i)&&(i=e.validator.format(i.replace(n,"{$1}"),a.parameters)),i},formatAndAdd:function(e,t){var a=this.defaultMessage(e,t);this.errorList.push({message:a,element:e,method:t.method}),this.errorMap[e.name]=a,this.submitted[e.name]=a},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,a;for(e=0;this.errorList[e];e++)a=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,a.element,this.settings.errorClass,this.settings.validClass),this.showLabel(a.element,a.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,a){var i,n,o,s,r=this.errorsFor(t),l=this.idOrName(t),c=e(t).attr("aria-describedby");r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.html(a)):(r=e("<"+this.settings.errorElement+">").attr("id",l+"-error").addClass(this.settings.errorClass).html(a||""),i=r,this.settings.wrapper&&(i=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement(i,e(t)):i.insertAfter(t),r.is("label")?r.attr("for",l):0===r.parents("label[for='"+this.escapeCssMeta(l)+"']").length&&(o=r.attr("id"),c?c.match(new RegExp("\\b"+this.escapeCssMeta(o)+"\\b"))||(c+=" "+o):c=o,e(t).attr("aria-describedby",c),n=this.groups[t.name],n&&(s=this,e.each(s.groups,function(t,a){a===n&&e("[name='"+s.escapeCssMeta(t)+"']",s.currentForm).attr("aria-describedby",r.attr("id"))})))),!a&&this.settings.success&&(r.text(""),"string"==typeof this.settings.success?r.addClass(this.settings.success):this.settings.success(r,t)),this.toShow=this.toShow.add(r)},errorsFor:function(t){var a=this.escapeCssMeta(this.idOrName(t)),i=e(t).attr("aria-describedby"),n="label[for='"+a+"'], label[for='"+a+"'] *";return i&&(n=n+", #"+this.escapeCssMeta(i).replace(/\s+/g,", #")),this.errors().filter(n)},escapeCssMeta:function(e){return e.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),e(t).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+this.escapeCssMeta(t)+"']")},getLength:function(t,a){switch(a.nodeName.toLowerCase()){case"select":return e("option:selected",a).length;case"input":if(this.checkable(a))return this.findByName(a.name).filter(":checked").length}return t.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(t,a){return!!e(t,a.form).length},function:function(e,t){return e(t)}},optional:function(t){var a=this.elementValue(t);return!e.validator.methods.required.call(this,a,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,e(t).addClass(this.settings.pendingClass),this.pending[t.name]=!0)},stopRequest:function(t,a){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],e(t).removeClass(this.settings.pendingClass),a&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!a&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t,a){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,{method:a})})},destroy:function(){this.resetForm(),e(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,a){t.constructor===String?this.classRuleSettings[t]=a:e.extend(this.classRuleSettings,t)},classRules:function(t){var a={},i=e(t).attr("class");return i&&e.each(i.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(a,e.validator.classRuleSettings[this])}),a},normalizeAttributeRule:function(e,t,a,i){/min|max|step/.test(a)&&(null===t||/number|range|text/.test(t))&&(i=Number(i),isNaN(i)&&(i=void 0)),i||0===i?e[a]=i:t===a&&"range"!==t&&(e[a]=!0)},attributeRules:function(t){var a,i,n={},o=e(t),s=t.getAttribute("type");for(a in e.validator.methods)"required"===a?(i=t.getAttribute(a),""===i&&(i=!0),i=!!i):i=o.attr(a),this.normalizeAttributeRule(n,s,a,i);return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},dataRules:function(t){var a,i,n={},o=e(t),s=t.getAttribute("type");for(a in e.validator.methods)i=o.data("rule"+a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()),this.normalizeAttributeRule(n,s,a,i);return n},staticRules:function(t){var a={},i=e.data(t.form,"validator");return i.settings.rules&&(a=e.validator.normalizeRule(i.settings.rules[t.name])||{}),a},normalizeRules:function(t,a){return e.each(t,function(i,n){if(n===!1)return void delete t[i];if(n.param||n.depends){var o=!0;switch(typeof n.depends){case"string":o=!!e(n.depends,a.form).length;break;case"function":o=n.depends.call(a,a)}o?t[i]=void 0===n.param||n.param:(e.data(a.form,"validator").resetElements(e(a)),delete t[i])}}),e.each(t,function(i,n){t[i]=e.isFunction(n)&&"normalizer"!==i?n(a):n}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var a;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(a=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(a[0]),Number(a[1])]))}),e.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var a={};e.each(t.split(/\s/),function(){a[this]=!0}),t=a}return t},addMethod:function(t,a,i){e.validator.methods[t]=a,e.validator.messages[t]=void 0!==i?i:e.validator.messages[t],a.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,a,i){if(!this.depend(i,a))return"dependency-mismatch";if("select"===a.nodeName.toLowerCase()){var n=e(a).val();return n&&n.length>0}return this.checkable(a)?this.getLength(t,a)>0:t.length>0},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},minlength:function(t,a,i){var n=e.isArray(t)?t.length:this.getLength(t,a);return this.optional(a)||n>=i},maxlength:function(t,a,i){var n=e.isArray(t)?t.length:this.getLength(t,a);return this.optional(a)||i>=n},rangelength:function(t,a,i){var n=e.isArray(t)?t.length:this.getLength(t,a);return this.optional(a)||n>=i[0]&&n<=i[1]},min:function(e,t,a){return this.optional(t)||e>=a},max:function(e,t,a){return this.optional(t)||a>=e},range:function(e,t,a){return this.optional(t)||e>=a[0]&&e<=a[1]},step:function(t,a,i){var n=e(a).attr("type"),o="Step attribute on input type "+n+" is not supported.",s=["text","number","range"],r=new RegExp("\\b"+n+"\\b");if(n&&!r.test(s.join()))throw new Error(o);return this.optional(a)||t%i===0},equalTo:function(t,a,i){var n=e(i);return this.settings.onfocusout&&n.not(".validate-equalTo-blur").length&&n.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){e(a).valid()}),t===n.val()},remote:function(t,a,i,n){if(this.optional(a))return"dependency-mismatch";n="string"==typeof n&&n||"remote";var o,s,r,l=this.previousValue(a,n);return this.settings.messages[a.name]||(this.settings.messages[a.name]={}),l.originalMessage=l.originalMessage||this.settings.messages[a.name][n],this.settings.messages[a.name][n]=l.message,i="string"==typeof i&&{url:i}||i,r=e.param(e.extend({data:t},i.data)),l.old===r?l.valid:(l.old=r,o=this,this.startRequest(a),s={},s[a.name]=t,e.ajax(e.extend(!0,{mode:"abort",port:"validate"+a.name,dataType:"json",data:s,context:o.currentForm,success:function(e){var i,s,r,c=e===!0||"true"===e;o.settings.messages[a.name][n]=l.originalMessage,c?(r=o.formSubmitted,o.resetInternals(),o.toHide=o.errorsFor(a),o.formSubmitted=r,o.successList.push(a),o.invalid[a.name]=!1,o.showErrors()):(i={},s=e||o.defaultMessage(a,{method:n,parameters:t}),i[a.name]=l.message=s,o.invalid[a.name]=!0,o.showErrors(i)),l.valid=c,o.stopRequest(a,c)}},i)),"pending")}}});var t,a={};e.ajaxPrefilter?e.ajaxPrefilter(function(e,t,i){var n=e.port;"abort"===e.mode&&(a[n]&&a[n].abort(),a[n]=i)}):(t=e.ajax,e.ajax=function(i){var n=("mode"in i?i:e.ajaxSettings).mode,o=("port"in i?i:e.ajaxSettings).port;return"abort"===n?(a[o]&&a[o].abort(),a[o]=t.apply(this,arguments),a[o]):t.apply(this,arguments)})});var map_contacts,map_marker="../images/icon_map_marker.png",map_selector;$(".map").hasClass("page_contacts")?map_selector=".map.page_contacts .google_map":$(".map").hasClass("page_partners")&&(map_selector=".map.page_partners .google_map");var styleArray=[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.country",elementType:"geometry",stylers:[{color:"#a6a6a6",weight:10}]},{featureType:"administrative.locality",elementType:"labels",stylers:[{visibility:"simplified",color:"#000000"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}],news={article_selector:".page_news .article_text",articles_text:[],short_text:[],expand_index:0,length:900,addExpandTextToArray:function(){var e=this;$(e.article_selector).each(function(){if($(this).text().length>e.length){var t=$(this).text().slice(0,e.length);e.articles_text.push($(this).text().slice(e.length)),$(this).attr("article-index",e.expand_index++),$(this).empty().append(t),e.short_text.push(t),$(this).append('<div class="show_more">... <span>Показать больше</span></div>')}})},expandText:function(e){$(e).parent().append(this.articles_text[$(e).parent().attr("article-index")]),$(e).parent().append('<div class="show_less">   <span>Показать меньше</span></div>'),$(e).parent().find(".show_more").remove()},hideText:function(e){var t=$(e).parent();t.empty(),t.append(news.short_text[t.attr("article-index")]),t.append('<div class="show_more">... <span>Показать больше</span></div>')}};!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";function t(e,t,a){var i;return function(){var n=this,o=arguments,s=function(){i=null,a||e.apply(n,o)},r=a&&!i;clearTimeout(i),i=setTimeout(s,t),r&&e.apply(n,o)}}function a(e){var t=++c;return String(null==e?"rmjs-":e)+t}function i(e){var t=e.clone().css({height:"auto",width:e.width(),maxHeight:"none",overflow:"hidden"}).insertAfter(e),a=t.outerHeight(),i=parseInt(t.css({maxHeight:""}).css("max-height").replace(/[^-\d\.]/g,""),10),n=e.data("defaultHeight");t.remove();var o=i||e.data("collapsedHeight")||n;e.data({expandedHeight:a,maxHeight:i,collapsedHeight:o}).css({maxHeight:"none"})}function n(e){if(!l[e.selector]){var t=" ";e.embedCSS&&""!==e.blockCSS&&(t+=e.selector+" + [data-readmore-toggle], "+e.selector+"[data-readmore]{"+e.blockCSS+"}"),t+=e.selector+"[data-readmore]{transition: height "+e.speed+"ms;overflow: hidden;}",function(e,t){var a=e.createElement("style");a.type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(e.createTextNode(t)),e.getElementsByTagName("head")[0].appendChild(a)}(document,t),l[e.selector]=!0}}function o(t,a){this.element=t,this.options=e.extend({},r,a),n(this.options),this._defaults=r,this._name=s,this.init(),window.addEventListener?(window.addEventListener("load",d),window.addEventListener("resize",d)):(window.attachEvent("load",d),window.attachEvent("resize",d))}var s="readmore",r={speed:100,collapsedHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,blockCSS:"display: block; width: 100%;",startOpen:!1,blockProcessed:function(){},beforeToggle:function(){},afterToggle:function(){}},l={},c=0,d=t(function(){e("[data-readmore]").each(function(){var t=e(this),a="true"===t.attr("aria-expanded");i(t),t.css({height:t.data(a?"expandedHeight":"collapsedHeight")})})},100);o.prototype={init:function(){var t=e(this.element);t.data({defaultHeight:this.options.collapsedHeight,heightMargin:this.options.heightMargin}),i(t);var n=t.data("collapsedHeight"),o=t.data("heightMargin");if(t.outerHeight(!0)<=n+o)return this.options.blockProcessed&&"function"==typeof this.options.blockProcessed&&this.options.blockProcessed(t,!1),!0;var s=t.attr("id")||a(),r=this.options.startOpen?this.options.lessLink:this.options.moreLink;t.attr({"data-readmore":"","aria-expanded":this.options.startOpen,id:s}),t.after(e(r).on("click",function(e){return function(a){e.toggle(this,t[0],a)}}(this)).attr({"data-readmore-toggle":s,"aria-controls":s})),this.options.startOpen||t.css({height:n}),this.options.blockProcessed&&"function"==typeof this.options.blockProcessed&&this.options.blockProcessed(t,!0)},toggle:function(t,a,i){i&&i.preventDefault(),t||(t=e('[aria-controls="'+this.element.id+'"]')[0]),a||(a=this.element);var n=e(a),o="",s="",r=!1,l=n.data("collapsedHeight");n.height()<=l?(o=n.data("expandedHeight")+"px",s="lessLink",r=!0):(o=l,s="moreLink"),this.options.beforeToggle&&"function"==typeof this.options.beforeToggle&&this.options.beforeToggle(t,n,!r),n.css({height:o}),n.on("transitionend",function(a){return function(){a.options.afterToggle&&"function"==typeof a.options.afterToggle&&a.options.afterToggle(t,n,r),e(this).attr({"aria-expanded":r}).off("transitionend")}}(this)),e(t).replaceWith(e(this.options[s]).on("click",function(e){return function(t){e.toggle(this,a,t)}}(this)).attr({"data-readmore-toggle":n.attr("id"),"aria-controls":n.attr("id")}))},destroy:function(){e(this.element).each(function(){var t=e(this);t.attr({"data-readmore":null,"aria-expanded":null}).css({maxHeight:"",height:""}).next("[data-readmore-toggle]").remove(),t.removeData()})}},e.fn.readmore=function(t){var a=arguments,i=this.selector;return t=t||{},"object"==typeof t?this.each(function(){if(e.data(this,"plugin_"+s)){var a=e.data(this,"plugin_"+s);a.destroy.apply(a)}t.selector=i,e.data(this,"plugin_"+s,new o(this,t))}):"string"==typeof t&&"_"!==t[0]&&"init"!==t?this.each(function(){var i=e.data(this,"plugin_"+s);i instanceof o&&"function"==typeof i[t]&&i[t].apply(i,Array.prototype.slice.call(a,1))}):void 0}});